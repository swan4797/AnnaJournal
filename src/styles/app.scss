// =============================================
// Main Application Styles
// =============================================

@use 'sass:color';
@use 'variables' as *;
@use 'mixins' as *;

// Reset & Base
*,
*::before,
*::after {
  box-sizing: border-box;
  margin: 0;
  padding: 0;
}

html {
  font-family: $font-family;
  font-size: 16px;
  line-height: $line-height-normal;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

body {
  background-color: $gray-100;
  color: $gray-900;
  min-height: 100vh;
}

a {
  color: inherit;
  text-decoration: none;
}

button {
  font-family: inherit;
}

img {
  max-width: 100%;
  height: auto;
}

// =============================================
// Layout Structure
// =============================================

.app-layout {
  @include flex(row);
  min-height: 100vh;

  @include mobile {
    flex-direction: column;
  }
}

// Sidebar
.sidebar {
  width: $sidebar-width;
  background: linear-gradient(180deg, #FAFAFA 0%, #F0F4F8 50%, #E8EEF4 100%);
  @include flex(column);
  flex-shrink: 0;
  height: 100vh;
  position: sticky;
  top: 0;
  border-radius: 0 24px 24px 0;

  &__header {
    padding: $spacing-5 $spacing-4;
    @include flex(row, space-between, center);
  }

  &__logo {
    width: 40px;
    height: 40px;
    @include flex-center;
    color: $gray-900;

    svg {
      width: 32px;
      height: 32px;
    }
  }

  &__toggle {
    @include button-reset;
    width: 32px;
    height: 32px;
    @include flex-center;
    border-radius: $radius-md;
    color: $gray-400;

    &:hover {
      color: $gray-600;
      background-color: rgba($black, 0.05);
    }
  }

  &__content {
    flex: 1;
    overflow-y: auto;
    padding: 0 $spacing-3;
    @include custom-scrollbar;
  }

  &__section {
    margin-bottom: $spacing-4;
  }

  &__section-title {
    font-size: $font-size-xs;
    font-weight: $font-weight-normal;
    color: $gray-400;
    padding: $spacing-3 $spacing-3 $spacing-2;
  }

  &__nav {
    @include flex(column, flex-start, stretch, 2px);
  }

  &__item {
    @include button-reset;
    width: 100%;
    @include flex(row, flex-start, center, $spacing-3);
    padding: $spacing-2 $spacing-3;
    border-radius: $radius-lg;
    font-size: $font-size-sm;
    color: $gray-700;
    text-decoration: none;
    transition: all $transition-fast;

    &:hover {
      background-color: rgba($black, 0.04);
    }

    &--active {
      background-color: $white;
      box-shadow: 0 1px 3px rgba($black, 0.08);
      color: $gray-900;
    }
  }

  &__icon {
    width: 20px;
    height: 20px;
    color: $gray-500;
    flex-shrink: 0;
  }

  &__label {
    flex: 1;
    text-align: left;
  }

  &__tags {
    @include flex(row, flex-end, center, $spacing-1);
    margin-left: auto;
  }

  &__tag {
    width: 22px;
    height: 22px;
    @include flex-center;
    background-color: $gray-200;
    border-radius: $radius-sm;
    font-size: 10px;
    font-weight: $font-weight-semibold;
    color: $gray-600;
  }

  &__badge {
    width: 22px;
    height: 22px;
    @include flex-center;
    background-color: $gray-200;
    border-radius: $radius-full;
    font-size: $font-size-xs;
    font-weight: $font-weight-medium;
    color: $gray-700;
    margin-left: auto;
  }

  &__footer {
    padding: $spacing-4;
    margin-top: auto;
  }

  &__account {
    @include flex(row, flex-start, center, $spacing-3);
    padding: $spacing-2;
  }

  &__avatar {
    width: 40px;
    height: 40px;
    border-radius: $radius-full;
    background: linear-gradient(135deg, #6366F1 0%, #8B5CF6 100%);
    color: $white;
    @include flex-center;
    font-size: $font-size-base;
    font-weight: $font-weight-semibold;
    flex-shrink: 0;
  }

  &__user-info {
    @include flex(column);
    min-width: 0;
  }

  &__user-name {
    font-size: $font-size-sm;
    font-weight: $font-weight-semibold;
    color: $gray-900;
    @include text-truncate;
  }

  &__user-role {
    font-size: $font-size-xs;
    color: $gray-500;
  }

  &__signout {
    @include button-reset;
    width: 100%;
    @include flex(row, flex-start, center, $spacing-3);
    padding: $spacing-3;
    margin-top: $spacing-3;
    border-radius: $radius-lg;
    font-size: $font-size-sm;
    color: $gray-600;
    text-decoration: none;
    transition: all $transition-fast;
    border: 1px solid $gray-200;

    &:hover {
      background-color: #FEE2E2;
      border-color: #FECACA;
      color: #DC2626;
    }

    svg {
      width: 18px;
      height: 18px;
    }
  }

  // Mobile sidebar styles
  @include mobile {
    position: fixed;
    left: 0;
    top: 0;
    bottom: 0;
    z-index: $z-sidebar-overlay;
    transform: translateX(-100%);
    transition: transform $transition-normal ease-out;
    border-radius: 0;
    box-shadow: $shadow-xl;

    &--open {
      transform: translateX(0);
    }
  }

  &__toggle {
    @include mobile {
      display: none;
    }
  }

  &__header {
    @include mobile {
      padding-top: calc($spacing-5 + env(safe-area-inset-top, 0px));
    }
  }
}

// Mobile hamburger menu button
.sidebar-toggle-mobile {
  display: none;

  @include mobile {
    display: flex;
    @include button-reset;
    @include touch-target;
    @include flex-center;
    position: fixed;
    top: $spacing-3;
    left: $spacing-3;
    z-index: $z-sidebar-overlay + 1;
    background-color: $white;
    border-radius: $radius-full;
    box-shadow: $shadow-md;
    color: $gray-700;

    &__icon {
      @include hamburger-icon;
    }

    &--open &__icon {
      background-color: transparent;

      &::before {
        transform: rotate(45deg) translate(4px, 4px);
      }
      &::after {
        transform: rotate(-45deg) translate(4px, -4px);
      }
    }
  }
}

// Mobile sidebar backdrop
.sidebar-backdrop {
  display: none;

  @include mobile {
    display: block;
    position: fixed;
    inset: 0;
    background-color: rgba($black, 0.5);
    z-index: $z-sidebar-overlay - 1;
    opacity: 0;
    visibility: hidden;
    transition: opacity $transition-normal, visibility $transition-normal;

    &--visible {
      opacity: 1;
      visibility: visible;
    }
  }
}

// Main Content
.main-content {
  flex: 1;
  @include flex(column);
  min-width: 0;
  background-color: $gray-50;

  @include mobile {
    width: 100%;
    min-height: 100vh;
  }
}

// Top Header
.top-header {
  @include flex(row, space-between, center);
  padding: $spacing-4 $spacing-6;
  background-color: $white;
  border-bottom: 1px solid $gray-200;

  @include mobile {
    padding: $spacing-3 $spacing-4;
    padding-left: 60px; // Space for hamburger button
  }

  &__breadcrumb {
    @include flex(row, flex-start, center, $spacing-2);
    font-size: $font-size-sm;
    color: $gray-500;

    @include mobile {
      display: none;
    }

    a {
      color: $gray-900;
      font-weight: $font-weight-medium;

      &:hover {
        color: $primary-blue;
      }
    }
  }

  &__separator {
    color: $gray-400;
  }

  &__current {
    @include flex(row, flex-start, center, $spacing-2);
    color: $gray-900;
    font-weight: $font-weight-medium;

    svg {
      width: 18px;
      height: 18px;
      color: $gray-500;
    }
  }

  &__actions {
    @include flex(row, flex-end, center, $spacing-3);

    @include mobile {
      gap: $spacing-2;
    }
  }

  &__action-btn {
    @include button-reset;
    width: 40px;
    height: 40px;
    @include flex-center;
    border-radius: $radius-full;
    color: $gray-600;
    transition: background-color $transition-fast;

    @include mobile {
      width: 36px;
      height: 36px;
    }

    &:hover {
      background-color: $gray-100;
    }

    svg {
      width: 20px;
      height: 20px;
    }
  }
}

// Calendar Header
.calendar-header {
  padding: $spacing-5 $spacing-6;
  background-color: $white;

  &__row {
    @include flex(row, space-between, center);
    margin-bottom: $spacing-4;
  }

  &__date {
    font-size: $font-size-2xl;
    font-weight: $font-weight-bold;
    color: $gray-900;
  }

  &__filters {
    @include flex(row, flex-start, center, $spacing-3);
  }

  &__filter-pills {
    @include flex(row, flex-start, center, $spacing-2);
  }

  &__pill {
    @include button-reset;
    padding: $spacing-2 $spacing-4;
    border-radius: $radius-full;
    font-size: $font-size-sm;
    font-weight: $font-weight-medium;
    background-color: $gray-100;
    color: $gray-600;
    transition: all $transition-fast;

    &:hover {
      background-color: $gray-200;
    }

    &--active {
      background-color: $primary-blue;
      color: $white;

      &:hover {
        background-color: $primary-blue-dark;
      }
    }

    &--math {
      background-color: #E8EEFF;
      color: $category-math;
    }

    &--art {
      background-color: $category-art;
      color: $category-art-text;
    }

    &--physics {
      background-color: $category-physics;
      color: $category-physics-text;
    }

    &--sport {
      background-color: $category-sport;
      color: $category-sport-text;
    }
  }

  &__controls {
    @include flex(row, flex-end, center, $spacing-3);
  }

  &__dropdown {
    @include flex(row, flex-start, center, $spacing-2);
    padding: $spacing-2 $spacing-3;
    background-color: $white;
    border: 1px solid $gray-300;
    border-radius: $radius-md;
    font-size: $font-size-sm;
    color: $gray-700;
    cursor: pointer;

    svg {
      width: 16px;
      height: 16px;
      color: $gray-500;
    }

    &:hover {
      border-color: $gray-400;
    }
  }

  &__filter-btn {
    @include button-reset;
    @include flex(row, center, center, $spacing-2);
    padding: $spacing-2 $spacing-3;
    border: 1px solid $gray-300;
    border-radius: $radius-md;
    font-size: $font-size-sm;
    color: $gray-700;
    position: relative;

    &:hover {
      border-color: $gray-400;
    }
  }

  &__filter-badge {
    @include badge($primary-blue, $white);
    position: absolute;
    top: -6px;
    right: -6px;
    font-size: 10px;
    min-width: 16px;
    height: 16px;
  }

  &__add-btn {
    @include button-reset;
    @include flex(row, center, center, $spacing-2);
    padding: $spacing-2 $spacing-4;
    background-color: $primary-blue;
    color: $white;
    border-radius: $radius-md;
    font-size: $font-size-sm;
    font-weight: $font-weight-medium;
    transition: background-color $transition-fast;

    &:hover {
      background-color: $primary-blue-dark;
    }
  }
}

// View Switcher
.view-switcher {
  display: inline-flex;
  padding: $spacing-1;
  background-color: $gray-100;
  border-radius: $radius-lg;
  border: 1px solid $gray-200;

  &__btn {
    @include button-reset;
    padding: $spacing-2 $spacing-3;
    font-size: $font-size-sm;
    font-weight: $font-weight-medium;
    border-radius: $radius-md;
    color: $gray-600;
    transition: all $transition-fast;

    &:hover {
      color: $gray-900;
    }

    &--active {
      background-color: $white;
      color: $gray-900;
      box-shadow: $shadow-sm;
    }
  }
}

// Calendar Component
.calendar {
  height: 100%;
  @include flex(column);
  background-color: $white;
  border-radius: $radius-lg;
  box-shadow: $shadow-sm;
  border: 1px solid $gray-200;
  overflow: hidden;

  &__header {
    @include flex(row, space-between, center);
    padding: $spacing-3 $spacing-4;
    border-bottom: 1px solid $gray-200;
  }

  &__header-left {
    @include flex(row, flex-start, center, $spacing-4);
  }

  &__header-right {
    @include flex(row, flex-end, center, $spacing-4);
  }

  &__title {
    font-size: $font-size-xl;
    font-weight: $font-weight-semibold;
    color: $gray-900;
  }

  &__today-btn {
    @include button-reset;
    padding: $spacing-1 $spacing-3;
    font-size: $font-size-sm;
    font-weight: $font-weight-medium;
    color: $gray-600;
    background-color: $gray-100;
    border-radius: $radius-md;
    transition: background-color $transition-fast;

    &:hover {
      background-color: $gray-200;
    }
  }

  &__nav {
    @include flex(row, flex-end, center, $spacing-1);
  }

  &__nav-btn {
    @include button-reset;
    padding: $spacing-2;
    color: $gray-600;
    border-radius: $radius-md;
    transition: background-color $transition-fast;

    &:hover {
      background-color: $gray-100;
    }
  }

  &__content {
    flex: 1;
    overflow: hidden;
  }
}

// Month View
.month-view {
  height: 100%;
  @include flex(column);

  &__weekdays {
    display: grid;
    grid-template-columns: repeat(7, 1fr);
    border-bottom: 1px solid $gray-200;
  }

  &__weekday {
    padding: $spacing-2;
    text-align: center;
    font-size: $font-size-sm;
    font-weight: $font-weight-medium;
    color: $gray-500;

    @include mobile {
      padding: $spacing-1;
      font-size: 10px;
    }
  }

  &__grid {
    flex: 1;
    display: grid;
    grid-template-columns: repeat(7, 1fr);
    grid-template-rows: repeat(6, 1fr);
  }

  &__cell {
    min-height: 100px;
    padding: $spacing-1;
    border-bottom: 1px solid $gray-200;
    border-right: 1px solid $gray-200;
    cursor: pointer;
    background-color: $white;
    transition: background-color $transition-fast;
    position: relative;

    @include mobile {
      min-height: 50px;
      padding: 2px;
    }

    &:hover {
      background-color: $gray-50;
    }

    &--other-month {
      background-color: $gray-50;
    }

    &--selected {
      box-shadow: inset 0 0 0 2px $primary-blue;
    }
  }

  &__date {
    @include flex-center;
    margin-bottom: $spacing-1;

    @include mobile {
      margin-bottom: 0;
    }
  }

  &__date-number {
    width: 28px;
    height: 28px;
    @include flex-center;
    font-size: $font-size-sm;
    border-radius: $radius-full;

    @include mobile {
      width: 24px;
      height: 24px;
      font-size: $font-size-xs;
    }

    &--today {
      background-color: $primary-blue;
      color: $white;
      font-weight: $font-weight-semibold;
    }
  }

  &__events {
    @include flex(column, flex-start, stretch, 2px);
    overflow: hidden;

    @include mobile {
      display: none; // Hide event blocks on mobile
    }
  }

  // Mobile event dots (indicator that there are events)
  &__event-dots {
    display: none;

    @include mobile {
      display: flex;
      justify-content: center;
      gap: 2px;
      margin-top: 2px;
    }
  }

  &__event-dot {
    width: 4px;
    height: 4px;
    border-radius: $radius-full;
    background-color: $primary-blue;
  }

  &__more {
    font-size: $font-size-xs;
    color: $gray-500;
    padding: 0 $spacing-1;

    @include mobile {
      display: none;
    }
  }

  // Exam badge in date header
  &__exam-badge {
    font-size: 10px;
    font-weight: $font-weight-bold;
    padding: 1px 4px;
    margin-left: $spacing-1;
    border-radius: $radius-sm;
    background-color: $error;
    color: $white;

    @include mobile {
      font-size: 8px;
      padding: 1px 2px;
    }
  }

  // Cell with exam indicator
  &__cell--has-exam {
    &::before {
      content: '';
      position: absolute;
      top: 2px;
      right: 2px;
      width: 8px;
      height: 8px;
      border-radius: $radius-full;
      background-color: $error;

      @include mobile {
        width: 6px;
        height: 6px;
      }
    }
  }
}

// Week View
.week-view {
  height: 100%;
  @include flex(column);

  @include mobile {
    overflow-x: auto;
    -webkit-overflow-scrolling: touch;
  }

  &__header {
    display: flex;
    border-bottom: 1px solid $gray-200;

    @include mobile {
      min-width: max-content;
    }
  }

  &__gutter {
    width: 64px;
    flex-shrink: 0;

    @include mobile {
      width: 48px;
      position: sticky;
      left: 0;
      background-color: $white;
      z-index: 10;
    }
  }

  &__day-header {
    flex: 1;
    text-align: center;
    padding: $spacing-2;
    border-left: 1px solid $gray-200;

    @include mobile {
      min-width: 80px;
      flex: 0 0 auto;
      padding: $spacing-1;
    }
  }

  &__weekday {
    font-size: $font-size-xs;
    color: $gray-500;
    text-transform: uppercase;
  }

  &__date-btn {
    @include button-reset;
    width: 32px;
    height: 32px;
    margin: $spacing-1 auto 0;
    @include flex-center;
    font-size: $font-size-sm;
    font-weight: $font-weight-medium;
    border-radius: $radius-full;
    color: $gray-900;
    transition: background-color $transition-fast;

    &:hover {
      background-color: $gray-100;
    }

    &--today {
      background-color: $primary-blue;
      color: $white;

      &:hover {
        background-color: $primary-blue-dark;
      }
    }

    &--selected {
      background-color: $primary-blue-light;
      color: $primary-blue;
    }
  }

  &__allday {
    display: flex;
    min-height: 40px;
    border-bottom: 1px solid $gray-200;
  }

  &__allday-label {
    font-size: $font-size-xs;
    color: $gray-500;
    text-align: right;
    padding: $spacing-1 $spacing-2;
  }

  &__allday-cell {
    flex: 1;
    border-left: 1px solid $gray-200;
    padding: $spacing-1;
    @include flex(column, flex-start, stretch, $spacing-1);
  }

  &__allday-event {
    @include button-reset;
    width: 100%;
    text-align: left;
    padding: 2px $spacing-2;
    font-size: $font-size-xs;
    border-radius: $radius-sm;
    @include text-truncate;
  }

  &__body {
    flex: 1;
    overflow-y: auto;
    @include custom-scrollbar;
  }

  &__grid {
    display: flex;
    position: relative;

    @include mobile {
      min-width: max-content;
    }
  }

  &__time-column {
    width: 64px;
    flex-shrink: 0;
    position: relative;

    @include mobile {
      width: 48px;
      position: sticky;
      left: 0;
      background-color: $white;
      z-index: 10;
    }
  }

  &__time-label {
    position: absolute;
    width: 100%;
    text-align: right;
    padding-right: $spacing-2;
    font-size: $font-size-xs;
    color: $gray-500;

    @include mobile {
      font-size: 10px;
      padding-right: $spacing-1;
    }
  }

  &__day-column {
    flex: 1;
    position: relative;
    border-left: 1px solid $gray-200;

    @include mobile {
      min-width: 80px;
      flex: 0 0 auto;
    }

    &--selected {
      background-color: rgba($primary-blue, 0.05);
    }
  }

  &__hour-slot {
    position: absolute;
    width: 100%;
    border-top: 1px solid $gray-100;
    cursor: pointer;
    transition: background-color $transition-fast;

    &:hover {
      background-color: $gray-50;
    }
  }

  &__event {
    @include button-reset;
    position: absolute;
    left: $spacing-1;
    right: $spacing-1;
    padding: $spacing-1 $spacing-2;
    border-radius: $radius-sm;
    font-size: $font-size-xs;
    text-align: left;
    overflow: hidden;
    transition: box-shadow $transition-fast;

    @include mobile {
      padding: 2px 4px;
    }

    &:hover {
      box-shadow: $shadow-md;
    }
  }

  &__event-title {
    font-weight: $font-weight-medium;
    @include text-truncate;
    @include flex(row, flex-start, center, $spacing-1);

    @include mobile {
      font-size: 10px;
    }
  }

  // Exam badges in day header
  &__exam-badges {
    @include flex(row, center, center, $spacing-1);
    margin-top: $spacing-1;
  }

  &__exam-badge {
    @include button-reset;
    font-size: 10px;
    font-weight: $font-weight-semibold;
    padding: 2px $spacing-1;
    border-radius: $radius-sm;
    color: $white;
    cursor: pointer;
    transition: transform $transition-fast;

    &:hover {
      transform: scale(1.05);
    }

    &--0 { background-color: $error; }
    &--1 { background-color: $primary-blue; }
    &--2 { background-color: $success; }
    &--3 { background-color: #8B5CF6; } // purple
    &--4 { background-color: #F59E0B; } // amber
  }

  // Linked exam indicator dot
  &__event-exam-dot {
    width: 6px;
    height: 6px;
    border-radius: $radius-full;
    background-color: currentColor;
    flex-shrink: 0;
  }

  // Exam-linked event color overrides
  &__event--exam-linked {
    border-left: 3px solid;
  }

  &__event--exam-0 { border-color: $error; }
  &__event--exam-1 { border-color: $primary-blue; }
  &__event--exam-2 { border-color: $success; }
  &__event--exam-3 { border-color: #8B5CF6; }
  &__event--exam-4 { border-color: #F59E0B; }
}

// Day View
.day-view {
  height: 100%;
  @include flex(column);

  &__header {
    padding: $spacing-3 $spacing-4;
    border-bottom: 1px solid $gray-200;

    @include mobile {
      padding: $spacing-2 $spacing-3;
    }
  }

  &__title {
    font-size: $font-size-lg;
    font-weight: $font-weight-semibold;
    color: $gray-900;

    @include mobile {
      font-size: $font-size-base;
    }
  }

  &__today-badge {
    font-size: $font-size-sm;
    color: $primary-blue;
  }

  &__allday {
    padding: $spacing-2 $spacing-4;
    border-bottom: 1px solid $gray-200;
    background-color: $gray-50;
  }

  &__allday-label {
    font-size: $font-size-xs;
    color: $gray-500;
    margin-bottom: $spacing-2;
  }

  &__allday-events {
    @include flex(column, flex-start, stretch, $spacing-1);
  }

  &__allday-event {
    @include button-reset;
    width: 100%;
    text-align: left;
    padding: $spacing-2 $spacing-3;
    border-radius: $radius-lg;
    border-left: 4px solid;
    @include flex(row, flex-start, center, $spacing-2);
    transition: box-shadow $transition-fast;

    &:hover {
      box-shadow: $shadow-md;
    }
  }

  &__body {
    flex: 1;
    overflow-y: auto;
    @include custom-scrollbar;
  }

  &__grid {
    display: flex;
    position: relative;
  }

  &__time-column {
    width: 80px;
    flex-shrink: 0;
    position: relative;
    background-color: $gray-50;

    @include mobile {
      width: 48px;
    }
  }

  &__time-label {
    position: absolute;
    width: 100%;
    text-align: right;
    padding-right: $spacing-3;
    font-size: $font-size-sm;
    font-weight: $font-weight-medium;
    color: $gray-500;

    @include mobile {
      font-size: 10px;
      padding-right: $spacing-2;
    }
  }

  &__events-column {
    flex: 1;
    position: relative;
    border-left: 1px solid $gray-200;
  }

  &__hour-slot {
    position: absolute;
    width: 100%;
    border-top: 1px solid $gray-200;
    cursor: pointer;
    transition: background-color $transition-fast;

    &:hover {
      background-color: rgba($primary-blue, 0.05);
    }
  }

  &__half-hour {
    position: absolute;
    width: 100%;
    border-top: 1px solid $gray-100;
  }

  &__current-time {
    position: absolute;
    left: 0;
    right: 0;
    z-index: 20;
    pointer-events: none;
    @include flex(row, flex-start, center);
  }

  &__current-time-dot {
    width: 12px;
    height: 12px;
    border-radius: $radius-full;
    background-color: $error;
    margin-left: -6px;
  }

  &__current-time-line {
    flex: 1;
    height: 2px;
    background-color: $error;
  }

  &__event {
    @include button-reset;
    position: absolute;
    left: $spacing-2;
    right: $spacing-4;
    padding: $spacing-2 $spacing-3;
    border-radius: $radius-lg;
    border-left: 4px solid;
    text-align: left;
    overflow: hidden;
    z-index: 10;
    @include flex(row, flex-start, flex-start, $spacing-2);
    transition: box-shadow $transition-fast;

    @include mobile {
      left: $spacing-1;
      right: $spacing-1;
      padding: $spacing-1 $spacing-2;
    }

    &:hover {
      box-shadow: $shadow-lg;
    }
  }

  &__event-icon {
    font-size: $font-size-lg;

    @include mobile {
      font-size: $font-size-sm;
    }
  }

  &__event-content {
    flex: 1;
    min-width: 0;
  }

  &__event-title {
    font-weight: $font-weight-medium;
    @include text-truncate;

    @include mobile {
      font-size: $font-size-xs;
    }
  }

  &__event-desc {
    font-size: $font-size-sm;
    opacity: 0.75;
    @include text-truncate;

    @include mobile {
      display: none;
    }
  }

  // Exam badges in header
  &__exam-badges {
    @include flex(row, flex-start, center, $spacing-2);
    margin-top: $spacing-2;
  }

  &__exam-badge {
    @include button-reset;
    font-size: $font-size-xs;
    font-weight: $font-weight-semibold;
    padding: $spacing-1 $spacing-2;
    border-radius: $radius-full;
    color: $white;
    cursor: pointer;
    transition: transform $transition-fast;

    &:hover {
      transform: scale(1.05);
    }

    &--0 { background-color: $error; }
    &--1 { background-color: $primary-blue; }
    &--2 { background-color: $success; }
    &--3 { background-color: #8B5CF6; }
    &--4 { background-color: #F59E0B; }
  }

  // Linked exam indicator
  &__event-exam-dot {
    width: 8px;
    height: 8px;
    border-radius: $radius-full;
    background-color: currentColor;
    flex-shrink: 0;
    margin-right: $spacing-1;
  }

  &__event-exam-link {
    font-size: $font-size-xs;
    opacity: 0.75;
    @include text-truncate;
  }

  // Exam-linked event color overrides
  &__event--exam-linked {
    border-left-width: 5px;
  }

  &__event--exam-0 { border-color: $error !important; }
  &__event--exam-1 { border-color: $primary-blue !important; }
  &__event--exam-2 { border-color: $success !important; }
  &__event--exam-3 { border-color: #8B5CF6 !important; }
  &__event--exam-4 { border-color: #F59E0B !important; }
}

// Week Calendar Grid (Legacy - can be removed if not used)
.week-calendar {
  flex: 1;
  padding: 0 $spacing-6 $spacing-6;
  overflow: auto;

  &__grid {
    display: grid;
    grid-template-columns: 60px repeat(7, 1fr);
    background-color: $white;
    border-radius: $radius-lg;
    border: 1px solid $gray-200;
    overflow: hidden;
  }

  &__header {
    display: contents;
  }

  &__corner {
    background-color: $gray-50;
    border-bottom: 1px solid $gray-200;
    border-right: 1px solid $gray-200;
  }

  &__day-header {
    padding: $spacing-3 $spacing-2;
    text-align: center;
    background-color: $gray-50;
    border-bottom: 1px solid $gray-200;
    border-right: 1px solid $gray-200;
    font-size: $font-size-sm;
    color: $gray-600;

    &:last-child {
      border-right: none;
    }

    &--today {
      background-color: $primary-blue;
      color: $white;
    }
  }

  &__day-number {
    font-weight: $font-weight-semibold;
    margin-right: $spacing-1;
  }

  &__body {
    display: contents;
  }

  &__row {
    display: contents;
  }

  &__time {
    padding: $spacing-2;
    font-size: $font-size-xs;
    color: $gray-500;
    text-align: right;
    border-right: 1px solid $gray-200;
    background-color: $white;
    min-height: 60px;
  }

  &__cell {
    border-right: 1px solid $gray-200;
    border-bottom: 1px solid $gray-200;
    padding: $spacing-1;
    min-height: 60px;
    position: relative;
    background-color: $white;

    &:last-child {
      border-right: none;
    }

    &:hover {
      background-color: $gray-50;
    }
  }
}

// Event Cards
.event-card {
  border-radius: $radius-md;
  padding: $spacing-2 $spacing-3;
  margin-bottom: $spacing-1;
  cursor: pointer;
  position: relative;
  transition: transform $transition-fast, box-shadow $transition-fast;

  &:hover {
    transform: translateY(-1px);
    box-shadow: $shadow-md;
  }

  &__title {
    font-size: $font-size-sm;
    font-weight: $font-weight-medium;
    color: inherit;
    margin-bottom: $spacing-1;
    @include text-truncate;
  }

  &__time {
    font-size: $font-size-xs;
    opacity: 0.8;
  }

  &__status {
    @include flex(row, flex-start, center, $spacing-1);
    margin-top: $spacing-2;
    font-size: $font-size-xs;
  }

  &__status-dot {
    width: 6px;
    height: 6px;
    border-radius: $radius-full;
    background-color: currentColor;
  }

  &__menu-btn {
    @include button-reset;
    position: absolute;
    top: $spacing-2;
    right: $spacing-2;
    width: 20px;
    height: 20px;
    @include flex-center;
    opacity: 0;
    transition: opacity $transition-fast;

    svg {
      width: 14px;
      height: 14px;
    }
  }

  &:hover &__menu-btn {
    opacity: 1;
  }

  // Category variants
  &--math {
    background-color: #E8EEFF;
    color: $category-math;
    border-left: 3px solid $category-math;
  }

  &--art {
    background-color: $category-art;
    color: $category-art-text;
    border-left: 3px solid $category-art-text;
  }

  &--physics {
    background-color: $category-physics;
    color: $category-physics-text;
    border-left: 3px solid $category-physics-text;
  }

  &--sport {
    background-color: $category-sport;
    color: $category-sport-text;
    border-left: 3px solid $category-sport-text;
  }

  &--computer {
    background-color: $category-computer;
    color: $category-computer-text;
    border-left: 3px solid $category-computer-text;
  }

  &--clinical {
    background-color: #E8F5E9;
    color: #2E7D32;
    border-left: 3px solid #4CAF50;
  }

  &--lecture {
    background-color: #E3F2FD;
    color: #1565C0;
    border-left: 3px solid #2196F3;
  }

  &--study {
    background-color: #F3E5F5;
    color: #7B1FA2;
    border-left: 3px solid #9C27B0;
  }

  &--task {
    background-color: #F5F5F5;
    color: #616161;
    border-left: 3px solid #9E9E9E;
  }

  &--homework {
    background-color: #FFF8E1;
    color: #E65100;
    border-left: 3px solid #FF9800;
  }

  &--exam {
    background-color: #FFEBEE;
    color: #C62828;
    border-left: 3px solid #F44336;
  }

  &--meeting {
    background-color: #E0F7FA;
    color: #00838F;
    border-left: 3px solid #00BCD4;
  }

  &--personal {
    background-color: #FCE4EC;
    color: #AD1457;
    border-left: 3px solid #E91E63;
  }

  &--deadline {
    background-color: #FFCDD2;
    color: #B71C1C;
    border-left: 3px solid #E53935;
  }

  &--completed {
    opacity: 0.6;
    text-decoration: line-through;
  }
}

// Confirmed badge
.status-badge {
  display: inline-flex;
  align-items: center;
  gap: $spacing-1;
  padding: $spacing-1 $spacing-2;
  background-color: rgba($white, 0.7);
  border-radius: $radius-sm;
  font-size: $font-size-xs;
  font-weight: $font-weight-medium;

  &--confirmed {
    color: $success;
  }

  &__dot {
    width: 6px;
    height: 6px;
    border-radius: $radius-full;
    background-color: currentColor;
  }
}

// Current time indicator
.current-time-indicator {
  position: absolute;
  left: 0;
  right: 0;
  height: 2px;
  background-color: $error;
  z-index: 10;

  &::before {
    content: '';
    position: absolute;
    left: -4px;
    top: -3px;
    width: 8px;
    height: 8px;
    background-color: $error;
    border-radius: $radius-full;
  }

  &__time {
    position: absolute;
    left: -50px;
    top: -8px;
    font-size: $font-size-xs;
    font-weight: $font-weight-medium;
    color: $error;
    background-color: $white;
    padding: $spacing-1 $spacing-2;
    border-radius: $radius-sm;
  }
}

// =============================================
// UI Components
// =============================================

// Buttons
.btn {
  @include button-reset;
  @include flex(row, center, center, $spacing-2);
  padding: $spacing-2 $spacing-4;
  border-radius: $radius-md;
  font-size: $font-size-sm;
  font-weight: $font-weight-medium;
  transition: all $transition-fast;
  @include focus-ring;

  &--primary {
    background-color: $primary-blue;
    color: $white;

    &:hover {
      background-color: $primary-blue-dark;
    }
  }

  &--secondary {
    background-color: $gray-100;
    color: $gray-700;

    &:hover {
      background-color: $gray-200;
    }
  }

  &--ghost {
    background-color: transparent;
    color: $gray-700;

    &:hover {
      background-color: $gray-100;
    }
  }

  &--danger {
    background-color: $error;
    color: $white;

    &:hover {
      background-color: color.adjust($error, $lightness: -10%);
    }
  }

  &--sm {
    padding: $spacing-1 $spacing-3;
    font-size: $font-size-xs;
  }

  &--lg {
    padding: $spacing-3 $spacing-6;
    font-size: $font-size-base;
  }

  &--full {
    width: 100%;
  }

  &:disabled {
    opacity: 0.5;
    cursor: not-allowed;
  }
}

// Inputs
.input {
  width: 100%;
  padding: $spacing-3 $spacing-4;
  border: 1px solid $gray-300;
  border-radius: $radius-md;
  font-size: $font-size-sm;
  color: $gray-900;
  background-color: $white;
  transition: border-color $transition-fast, box-shadow $transition-fast;

  &::placeholder {
    color: $gray-400;
  }

  &:hover {
    border-color: $gray-400;
  }

  &:focus {
    outline: none;
    border-color: $primary-blue;
    box-shadow: 0 0 0 3px rgba($primary-blue, 0.1);
  }

  &--error {
    border-color: $error;

    &:focus {
      box-shadow: 0 0 0 3px rgba($error, 0.1);
    }
  }

  &__wrapper {
    @include flex(column, flex-start, stretch, $spacing-2);
  }

  &__label {
    font-size: $font-size-sm;
    font-weight: $font-weight-medium;
    color: $gray-700;
  }

  &__error {
    font-size: $font-size-xs;
    color: $error;
  }
}

// Textarea
.textarea {
  @extend .input;
  min-height: 100px;
  resize: vertical;
}

// Select
.select {
  @extend .input;
  cursor: pointer;
  appearance: none;
  background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' viewBox='0 0 24 24' fill='none' stroke='%239E9E9E' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpath d='M6 9l6 6 6-6'/%3E%3C/svg%3E");
  background-repeat: no-repeat;
  background-position: right $spacing-3 center;
  padding-right: $spacing-10;
}

// Checkbox
.checkbox {
  @include flex(row, flex-start, center, $spacing-2);
  cursor: pointer;

  &__input {
    width: 16px;
    height: 16px;
    border: 2px solid $gray-300;
    border-radius: $radius-sm;
    cursor: pointer;
    transition: all $transition-fast;

    &:checked {
      background-color: $primary-blue;
      border-color: $primary-blue;
    }
  }

  &__label {
    font-size: $font-size-sm;
    color: $gray-700;
  }
}

// Modal
.modal {
  position: fixed;
  inset: 0;
  z-index: $z-modal;
  @include flex-center;

  &__backdrop {
    position: absolute;
    inset: 0;
    background-color: rgba($black, 0.5);
  }

  &__content {
    position: relative;
    background-color: $white;
    border-radius: $radius-lg;
    box-shadow: $shadow-xl;
    max-width: 90vw;
    max-height: 90vh;
    overflow: auto;
    @include custom-scrollbar;
  }

  &--sm &__content {
    width: 400px;
  }

  &--md &__content {
    width: 500px;
  }

  &--lg &__content {
    width: 640px;
  }

  &__header {
    @include flex(row, space-between, center);
    padding: $spacing-5 $spacing-6;
    border-bottom: 1px solid $gray-200;
  }

  &__title {
    font-size: $font-size-lg;
    font-weight: $font-weight-semibold;
    color: $gray-900;
  }

  &__close {
    @include button-reset;
    width: 32px;
    height: 32px;
    @include flex-center;
    border-radius: $radius-md;
    color: $gray-500;

    &:hover {
      background-color: $gray-100;
    }
  }

  &__body {
    padding: $spacing-6;
  }

  &__footer {
    @include flex(row, flex-end, center, $spacing-3);
    padding: $spacing-4 $spacing-6;
    border-top: 1px solid $gray-200;
  }
}

// Search Bar
.search-bar {
  position: relative;

  &__container {
    @include flex(row, flex-start, center, $spacing-2);
  }

  &__input-wrapper {
    position: relative;
    flex: 1;
  }

  &__icon {
    position: absolute;
    left: $spacing-3;
    top: 50%;
    transform: translateY(-50%);
    width: 16px;
    height: 16px;
    color: $gray-400;
  }

  &__input {
    width: 100%;
    padding: $spacing-2 $spacing-4 $spacing-2 $spacing-10;
    border: 1px solid $gray-300;
    border-radius: $radius-md;
    font-size: $font-size-sm;
    background-color: $white;

    &:focus {
      outline: none;
      border-color: $primary-blue;
    }
  }

  &__filter-btn {
    @include button-reset;
    padding: $spacing-2;
    border: 1px solid $gray-300;
    border-radius: $radius-md;
    color: $gray-500;
    transition: all $transition-fast;

    &:hover {
      border-color: $gray-400;
      background-color: $gray-50;
    }

    &--active {
      border-color: $primary-blue;
      background-color: $primary-blue-light;
      color: $primary-blue;
    }
  }

  &__dropdown {
    position: absolute;
    top: 100%;
    left: 0;
    right: 0;
    margin-top: $spacing-2;
    background-color: $white;
    border: 1px solid $gray-200;
    border-radius: $radius-lg;
    box-shadow: $shadow-lg;
    z-index: $z-dropdown;
    max-height: 400px;
    overflow-y: auto;
    @include custom-scrollbar;
  }

  &__result-item {
    @include button-reset;
    width: 100%;
    padding: $spacing-3;
    @include flex(row, flex-start, flex-start, $spacing-3);
    text-align: left;
    transition: background-color $transition-fast;

    &:hover {
      background-color: $gray-50;
    }
  }
}

// File Upload
.file-upload {
  &__input {
    display: none;
  }

  &__dropzone {
    border: 2px dashed $gray-300;
    border-radius: $radius-lg;
    padding: $spacing-6;
    text-align: center;
    cursor: pointer;
    transition: all $transition-fast;

    &:hover,
    &--active {
      border-color: $primary-blue;
      background-color: $primary-blue-light;
    }

    &--uploading {
      opacity: 0.5;
      cursor: wait;
    }

    &--compact {
      padding: $spacing-4;
    }
  }

  &__uploading {
    @include flex(column, center, center, $spacing-2);
  }

  &__placeholder {
    @include flex(column, center, center, $spacing-2);
  }

  &__icon {
    width: 32px;
    height: 32px;
    color: $gray-400;
  }

  &__link {
    font-size: $font-size-sm;
    font-weight: $font-weight-medium;
    color: $primary-blue;
  }

  &__text {
    font-size: $font-size-sm;
    color: $gray-500;
  }

  &__hint {
    font-size: $font-size-xs;
    color: $gray-400;
  }

  &__add {
    @include flex(row, center, center, $spacing-2);
    font-size: $font-size-sm;
    color: $gray-500;

    svg {
      color: $gray-400;
    }
  }

  &__error {
    margin-top: $spacing-2;
    font-size: $font-size-sm;
    color: $error;
  }
}

// File Upload Pending (for new events)
.file-upload-pending {
  @include flex(column, flex-start, stretch, $spacing-3);

  &__list {
    @include flex(column, flex-start, stretch, $spacing-2);
  }
}

// File List
.file-list {
  @include flex(column, flex-start, stretch, $spacing-2);

  &--compact {
    gap: $spacing-1;
  }
}

// File Item
.file-item {
  @include flex(row, flex-start, center, $spacing-3);
  padding: $spacing-3;
  background-color: $white;
  border: 1px solid $gray-200;
  border-radius: $radius-md;

  &--pending {
    background-color: $gray-50;
  }

  &--compact {
    @include button-reset;
    width: 100%;
    padding: $spacing-2;
    gap: $spacing-2;
    text-align: left;
    transition: background-color $transition-fast;

    &:hover {
      background-color: $gray-100;
    }

    &:disabled {
      opacity: 0.5;
    }
  }

  &__icon-box {
    flex-shrink: 0;
    width: 40px;
    height: 40px;
    @include flex-center;
    background-color: $gray-100;
    border-radius: $radius-lg;
  }

  &__icon {
    font-size: $font-size-xl;
  }

  &__info {
    flex: 1;
    min-width: 0;
  }

  &__name {
    font-size: $font-size-sm;
    font-weight: $font-weight-medium;
    color: $gray-900;
    @include text-truncate;
  }

  &__size {
    font-size: $font-size-xs;
    color: $gray-500;
  }

  &__actions {
    @include flex(row, flex-end, center, $spacing-1);
  }

  &__btn {
    @include button-reset;
    padding: $spacing-2;
    color: $gray-500;
    border-radius: $radius-md;
    transition: all $transition-fast;

    &:hover {
      background-color: $gray-100;
    }

    &:disabled {
      opacity: 0.5;
    }

    &--view:hover {
      color: $primary-blue;
    }

    &--download:hover {
      color: $success;
    }

    &--delete:hover {
      color: $error;
    }
  }

  &__remove {
    @include button-reset;
    padding: $spacing-1;
    color: $gray-400;
    transition: color $transition-fast;

    &:hover {
      color: $error;
    }
  }

  &__confirm {
    @include flex(row, flex-end, center, $spacing-1);
  }

  &__confirm-btn {
    @include button-reset;
    padding: $spacing-1;
    font-size: $font-size-xs;
    color: $gray-500;

    &:hover {
      color: $gray-700;
    }

    &--danger {
      color: $error;
      font-weight: $font-weight-medium;

      &:hover {
        color: color.adjust($error, $lightness: -10%);
      }
    }

    &:disabled {
      opacity: 0.5;
    }
  }
}

// Loading spinner
.spinner {
  @include spinner;

  &--sm {
    width: 16px;
    height: 16px;
  }

  &--lg {
    width: 32px;
    height: 32px;
  }
}

// Alert / Error message
.alert {
  padding: $spacing-3 $spacing-4;
  border-radius: $radius-md;
  font-size: $font-size-sm;
  @include flex(row, flex-start, center, $spacing-2);

  &--error {
    background-color: $error-light;
    color: $error;
    border: 1px solid rgba($error, 0.2);
  }

  &--success {
    background-color: $success-light;
    color: $success;
    border: 1px solid rgba($success, 0.2);
  }

  &--warning {
    background-color: $warning-light;
    color: $warning;
    border: 1px solid rgba($warning, 0.2);
  }

  &--info {
    background-color: $info-light;
    color: $info;
    border: 1px solid rgba($info, 0.2);
  }
}

// Forms
.form {
  @include flex(column, flex-start, stretch, $spacing-4);

  &__row {
    @include flex(column, flex-start, stretch, $spacing-2);
  }

  &__grid {
    @include grid(2, $spacing-4);
  }

  &__actions {
    @include flex(row, flex-end, center, $spacing-3);
    padding-top: $spacing-4;
    border-top: 1px solid $gray-200;
  }
}

// Category Selector
.category-selector {
  @include grid(3, $spacing-2);

  &__item {
    @include button-reset;
    padding: $spacing-2;
    border: 2px solid $gray-200;
    border-radius: $radius-lg;
    text-align: left;
    transition: all $transition-fast;

    &:hover {
      border-color: $gray-300;
    }

    &--active {
      border-color: currentColor;
    }
  }

  &__icon {
    font-size: $font-size-lg;
    margin-right: $spacing-1;
  }

  &__label {
    font-size: $font-size-xs;
    font-weight: $font-weight-medium;
  }
}

// Quick Capture
.quick-capture {
  padding: $spacing-3;
  background-color: $white;
  border-radius: $radius-lg;
  border: 1px solid $gray-200;
  box-shadow: $shadow-sm;

  &__trigger {
    @include button-reset;
    width: 100%;
    padding: $spacing-3;
    border: 2px dashed $gray-300;
    border-radius: $radius-lg;
    color: $gray-500;
    @include flex(row, center, center, $spacing-2);
    transition: all $transition-fast;

    &:hover {
      border-color: $primary-blue;
      color: $primary-blue;
    }
  }

  &__icon {
    width: 20px;
    height: 20px;
  }

  &__content {
    @include flex(column, flex-start, stretch, $spacing-3);
  }

  &__categories {
    @include flex(row, flex-start, center, $spacing-1);
    flex-wrap: wrap;
  }

  &__cat-btn {
    @include button-reset;
    padding: $spacing-1 $spacing-2;
    border-radius: $radius-sm;
    font-size: $font-size-xs;
    font-weight: $font-weight-medium;
    background-color: $gray-100;
    color: $gray-600;
    transition: all $transition-fast;

    &:hover {
      background-color: $gray-200;
    }

    &--active {
      color: $white;
    }

    // Category colors when active
    &--task.quick-capture__cat-btn--active { background-color: #9E9E9E; }
    &--homework.quick-capture__cat-btn--active { background-color: #FF9800; }
    &--exam.quick-capture__cat-btn--active { background-color: #F44336; }
    &--lecture.quick-capture__cat-btn--active { background-color: #2196F3; }
    &--study.quick-capture__cat-btn--active { background-color: #9C27B0; }
    &--meeting.quick-capture__cat-btn--active { background-color: #00BCD4; }
    &--personal.quick-capture__cat-btn--active { background-color: #E91E63; }
    &--deadline.quick-capture__cat-btn--active { background-color: #E53935; }
    &--clinical.quick-capture__cat-btn--active { background-color: #4CAF50; }
  }

  &__selected {
    font-size: $font-size-xs;
    @include flex(row, flex-start, center, $spacing-1);
  }

  &__actions {
    @include flex(row, flex-end, center, $spacing-2);
  }
}

// Event Form
.event-form {
  @include flex(column, flex-start, stretch, $spacing-4);

  &__field {
    @include flex(column, flex-start, stretch, $spacing-2);
  }

  &__categories {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: $spacing-2;
  }

  &__cat-btn {
    @include button-reset;
    padding: $spacing-2;
    border: 2px solid $gray-200;
    border-radius: $radius-lg;
    text-align: left;
    transition: all $transition-fast;
    @include flex(row, flex-start, center, $spacing-1);

    span:first-child {
      font-size: $font-size-lg;
    }

    span:last-child {
      font-size: $font-size-xs;
      font-weight: $font-weight-medium;
      color: $gray-600;
    }

    &:hover {
      border-color: $gray-300;
    }

    &--active {
      border-color: currentColor;
      background-color: rgba($primary-blue, 0.05);

      span:last-child {
        color: inherit;
      }
    }

    // Category colors
    &--task { &.event-form__cat-btn--active { border-color: #9E9E9E; color: #616161; } }
    &--homework { &.event-form__cat-btn--active { border-color: #FF9800; color: #E65100; } }
    &--exam { &.event-form__cat-btn--active { border-color: #F44336; color: #C62828; } }
    &--lecture { &.event-form__cat-btn--active { border-color: #2196F3; color: #1565C0; } }
    &--study { &.event-form__cat-btn--active { border-color: #9C27B0; color: #7B1FA2; } }
    &--meeting { &.event-form__cat-btn--active { border-color: #00BCD4; color: #00838F; } }
    &--personal { &.event-form__cat-btn--active { border-color: #E91E63; color: #AD1457; } }
    &--deadline { &.event-form__cat-btn--active { border-color: #E53935; color: #B71C1C; } }
    &--clinical { &.event-form__cat-btn--active { border-color: #4CAF50; color: #2E7D32; } }
  }

  &__checkbox {
    @include flex(row, flex-start, center, $spacing-2);
    cursor: pointer;

    input {
      width: 16px;
      height: 16px;
      border-radius: $radius-sm;
      cursor: pointer;
    }

    span {
      font-size: $font-size-sm;
      color: $gray-700;
    }
  }

  &__row {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: $spacing-4;
  }

  &__files {
    @include flex(column, flex-start, stretch, $spacing-3);
  }

  &__actions {
    @include flex(row, flex-end, center, $spacing-3);
    padding-top: $spacing-4;
    border-top: 1px solid $gray-200;
  }
}

// Event Details (sidebar panel)
.event-details {
  @include flex(column);
  height: 100%;

  &__header {
    @include flex(row, space-between, center);
    margin-bottom: $spacing-4;
  }

  &__title {
    font-size: $font-size-lg;
    font-weight: $font-weight-semibold;
    color: $gray-900;
  }

  &__close {
    @include button-reset;
    padding: $spacing-1;
    color: $gray-500;
    border-radius: $radius-md;

    &:hover {
      background-color: $gray-100;
    }
  }

  &__card {
    padding: $spacing-4;
    border-radius: $radius-lg;
    margin-bottom: $spacing-4;
  }

  &__category {
    @include flex(row, flex-start, center, $spacing-2);
    margin-bottom: $spacing-2;
  }

  &__category-icon {
    font-size: $font-size-2xl;
  }

  &__category-label {
    font-size: $font-size-sm;
    font-weight: $font-weight-medium;
  }

  &__event-title {
    font-size: $font-size-xl;
    font-weight: $font-weight-semibold;
    color: $gray-900;
  }

  &__content {
    flex: 1;
    overflow-y: auto;
    @include custom-scrollbar;
  }

  &__section {
    margin-bottom: $spacing-4;
  }

  &__section-title {
    font-size: $font-size-sm;
    font-weight: $font-weight-medium;
    color: $gray-500;
    margin-bottom: $spacing-1;
  }

  &__section-content {
    color: $gray-900;
  }

  &__actions {
    margin-top: auto;
    padding-top: $spacing-4;
    border-top: 1px solid $gray-200;
    @include flex(column, flex-start, stretch, $spacing-2);
  }
}

// Day Agenda (sidebar)
.day-agenda {
  flex: 1;
  overflow-y: auto;
  @include custom-scrollbar;

  &__header {
    margin-bottom: $spacing-4;
  }

  &__date {
    font-size: $font-size-lg;
    font-weight: $font-weight-semibold;
    color: $gray-900;
    margin-bottom: $spacing-1;
  }

  &__count {
    font-size: $font-size-sm;
    color: $gray-500;
  }

  &__progress {
    padding: $spacing-3;
    background-color: $white;
    border: 1px solid $gray-200;
    border-radius: $radius-lg;
    margin-bottom: $spacing-4;
  }

  &__progress-header {
    @include flex(row, space-between, center);
    font-size: $font-size-sm;
    margin-bottom: $spacing-1;
  }

  &__progress-label {
    color: $gray-600;
  }

  &__progress-value {
    font-weight: $font-weight-medium;
    color: $gray-900;
  }

  &__progress-bar {
    height: 8px;
    background-color: $gray-200;
    border-radius: $radius-full;
    overflow: hidden;
  }

  &__progress-fill {
    height: 100%;
    background-color: $success;
    border-radius: $radius-full;
    transition: width $transition-normal;
  }

  &__empty {
    text-align: center;
    padding: $spacing-8;
    color: $gray-500;
  }

  &__category-group {
    margin-bottom: $spacing-4;
  }

  &__category-title {
    font-size: $font-size-xs;
    font-weight: $font-weight-semibold;
    text-transform: uppercase;
    letter-spacing: 0.05em;
    margin-bottom: $spacing-2;
    @include flex(row, flex-start, center, $spacing-2);
  }

  &__category-count {
    padding: $spacing-1 $spacing-2;
    background-color: $gray-200;
    color: $gray-600;
    font-size: $font-size-xs;
    border-radius: $radius-sm;
  }

  &__event-item {
    @include flex(row, flex-start, flex-start, $spacing-2);
    margin-bottom: $spacing-2;
  }

  &__checkbox {
    @include button-reset;
    width: 16px;
    height: 16px;
    border: 2px solid $gray-300;
    border-radius: $radius-sm;
    margin-top: $spacing-1;
    flex-shrink: 0;
    @include flex-center;
    transition: all $transition-fast;

    &:hover {
      border-color: $success;
    }

    &--checked {
      background-color: $success;
      border-color: $success;
      color: $white;
    }
  }
}

// Sidebar Panel (right side of calendar)
.sidebar-panel {
  width: 320px;
  border-left: 1px solid $gray-200;
  background-color: $gray-50;
  padding: $spacing-4;
  @include flex(column);
  overflow-y: auto;
  @include custom-scrollbar;
}

// Utility classes
.visually-hidden {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border: 0;
}

.text-truncate {
  @include text-truncate;
}

.text-center {
  text-align: center;
}

// =============================================
// TimeFrame Calendar Layout (New Design)
// =============================================

$tf-primary: #7C7AEA;
$tf-primary-light: #9B99F5;
$tf-primary-dark: #5D5BC4;
$tf-accent: #C5E17A;
$tf-accent-dark: #A8C45A;
$tf-bg: #E8E7F8;
$tf-card-bg: #F0EFF9;

.timeframe {
  display: flex;
  flex-direction: column;
  min-height: 100vh;
  background-color: $tf-bg;

  &__header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: $spacing-4 $spacing-6;
    background-color: $tf-primary;
    color: $white;
  }

  &__brand {
    display: flex;
    align-items: center;
    gap: $spacing-3;
  }

  &__logo {
    width: 40px;
    height: 40px;
    background-color: rgba($white, 0.2);
    border-radius: $radius-full;
    @include flex-center;
  }

  &__brand-name {
    font-size: $font-size-xl;
    font-weight: $font-weight-semibold;
  }

  &__view-switcher {
    display: flex;
    background-color: rgba($white, 0.15);
    border-radius: $radius-full;
    padding: 4px;
  }

  &__view-btn {
    @include button-reset;
    padding: $spacing-2 $spacing-5;
    font-size: $font-size-sm;
    font-weight: $font-weight-medium;
    color: rgba($white, 0.8);
    border-radius: $radius-full;
    transition: all $transition-fast;

    &:hover {
      color: $white;
    }

    &--active {
      background-color: $white;
      color: $tf-primary;
    }
  }

  &__header-actions {
    display: flex;
    align-items: center;
    gap: $spacing-4;
  }

  &__content {
    display: flex;
    flex: 1;
    padding: $spacing-6;
    gap: $spacing-6;
  }

  &__sidebar {
    width: 320px;
    flex-shrink: 0;
    display: flex;
    flex-direction: column;
    gap: $spacing-4;
  }

  &__title-section {
    padding: $spacing-4;
    background-color: $tf-primary;
    border-radius: $radius-xl;
    color: $white;
  }

  &__title {
    font-size: $font-size-2xl;
    font-weight: $font-weight-bold;
    margin-bottom: $spacing-1;
  }

  &__subtitle {
    font-size: $font-size-sm;
    opacity: 0.8;
  }

  &__stats {
    display: flex;
    gap: $spacing-3;
    align-items: center;
  }

  &__stat-card {
    flex: 1;
    padding: $spacing-3;
    background-color: $white;
    border-radius: $radius-lg;
    text-align: center;
  }

  &__stat-label {
    display: block;
    font-size: $font-size-xs;
    color: $gray-500;
    margin-bottom: $spacing-1;
  }

  &__stat-value {
    font-size: $font-size-xl;
    font-weight: $font-weight-bold;
    color: $gray-900;
  }

  &__add-btn {
    @include button-reset;
    display: flex;
    align-items: center;
    gap: $spacing-2;
    padding: $spacing-3 $spacing-4;
    background-color: $tf-primary;
    color: $white;
    border-radius: $radius-lg;
    font-size: $font-size-sm;
    font-weight: $font-weight-medium;
    transition: background-color $transition-fast;

    &:hover {
      background-color: $tf-primary-dark;
    }
  }

  &__mini-calendar {
    background-color: $tf-card-bg;
    border-radius: $radius-xl;
    padding: $spacing-4;
  }

  &__main {
    flex: 1;
    display: flex;
    flex-direction: column;
    min-width: 0;
  }

  &__calendar-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    margin-bottom: $spacing-4;
  }

  &__date-display {
    font-size: $font-size-xl;
    font-weight: $font-weight-semibold;
    color: $gray-900;
  }

  &__calendar-nav {
    display: flex;
    align-items: center;
    gap: $spacing-3;
  }

  &__today-btn {
    @include button-reset;
    padding: $spacing-2 $spacing-4;
    background-color: $tf-primary;
    color: $white;
    border-radius: $radius-md;
    font-size: $font-size-sm;
    font-weight: $font-weight-medium;
    transition: background-color $transition-fast;

    &:hover {
      background-color: $tf-primary-dark;
    }
  }

  &__nav-arrows {
    display: flex;
    gap: $spacing-1;
  }

  &__arrow-btn {
    @include button-reset;
    width: 32px;
    height: 32px;
    @include flex-center;
    background-color: $white;
    border-radius: $radius-md;
    color: $gray-600;
    transition: all $transition-fast;

    &:hover {
      background-color: $tf-primary;
      color: $white;
    }
  }

  &__filters {
    display: flex;
    gap: $spacing-2;
    margin-bottom: $spacing-4;
    flex-wrap: wrap;
  }

  &__filter-pill {
    @include button-reset;
    padding: $spacing-2 $spacing-4;
    background-color: $white;
    border-radius: $radius-full;
    font-size: $font-size-sm;
    font-weight: $font-weight-medium;
    color: $gray-600;
    transition: all $transition-fast;
    display: flex;
    align-items: center;
    gap: $spacing-1;

    &:hover {
      background-color: $gray-100;
    }

    &--active {
      background-color: $tf-primary;
      color: $white;

      &:hover {
        background-color: $tf-primary-dark;
      }
    }

    &--lecture.timeframe__filter-pill--active {
      background-color: #2196F3;
    }

    &--study.timeframe__filter-pill--active {
      background-color: #9C27B0;
    }

    &--homework.timeframe__filter-pill--active {
      background-color: #FF9800;
    }

    &--clinical.timeframe__filter-pill--active {
      background-color: #4CAF50;
    }

    &--task.timeframe__filter-pill--active {
      background-color: #9E9E9E;
    }
  }

  &__calendar-grid {
    flex: 1;
    background-color: $white;
    border-radius: $radius-xl;
    overflow: hidden;
  }
}

// Mini Calendar Component
.mini-calendar {
  &__header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    margin-bottom: $spacing-3;
  }

  &__month {
    font-size: $font-size-base;
    font-weight: $font-weight-semibold;
    color: $gray-900;
  }

  &__nav {
    display: flex;
    gap: $spacing-1;
  }

  &__nav-btn {
    @include button-reset;
    width: 28px;
    height: 28px;
    @include flex-center;
    border-radius: $radius-md;
    color: $gray-500;
    transition: all $transition-fast;

    &:hover {
      background-color: $tf-primary-light;
      color: $white;
    }
  }

  &__weekdays {
    display: grid;
    grid-template-columns: repeat(7, 1fr);
    margin-bottom: $spacing-2;
  }

  &__weekday {
    text-align: center;
    font-size: $font-size-xs;
    font-weight: $font-weight-medium;
    color: $gray-500;
    padding: $spacing-1;
  }

  &__grid {
    display: grid;
    grid-template-columns: repeat(7, 1fr);
    gap: 2px;
  }

  &__day {
    @include button-reset;
    aspect-ratio: 1;
    @include flex-center;
    font-size: $font-size-sm;
    color: $gray-700;
    border-radius: $radius-full;
    transition: all $transition-fast;
    position: relative;

    &:hover {
      background-color: $tf-primary-light;
      color: $white;
    }

    &--empty {
      pointer-events: none;
    }

    &--today {
      background-color: $tf-primary;
      color: $white;
      font-weight: $font-weight-semibold;
    }

    &--selected {
      background-color: $tf-accent;
      color: $gray-900;
      font-weight: $font-weight-semibold;
    }

    &--has-events::after {
      content: '';
      position: absolute;
      bottom: 4px;
      left: 50%;
      transform: translateX(-50%);
      width: 4px;
      height: 4px;
      background-color: $tf-primary;
      border-radius: $radius-full;
    }

    &--today.mini-calendar__day--has-events::after,
    &--selected.mini-calendar__day--has-events::after {
      background-color: $white;
    }
  }
}

// Auth Page - Split Layout Design
$auth-green-light: #D4E8D1;
$auth-green-medium: #A8D5A2;
$auth-green-dark: #2D5A4A;
$auth-green-primary: #4CAF50;

.auth-page {
  display: flex;
  min-height: 100vh;
  background-color: $auth-green-light;

  @include mobile {
    flex-direction: column;
  }

  // Left Panel - Illustration
  &__illustration {
    flex: 1;
    display: flex;
    align-items: center;
    justify-content: center;
    background: linear-gradient(180deg, $auth-green-light 0%, $auth-green-medium 50%, $auth-green-dark 100%);
    padding: $spacing-8;
    position: relative;
    overflow: hidden;

    @include mobile {
      display: none;
    }
  }

  &__illustration-content {
    position: relative;
    width: 100%;
    max-width: 500px;
    height: 400px;
  }

  &__clock {
    position: absolute;
    top: 0;
    right: 20%;
    width: 48px;
    height: 48px;
    background-color: $white;
    border-radius: $radius-full;
    @include flex-center;
    color: $gray-700;
    box-shadow: $shadow-md;
  }

  &__scene {
    width: 100%;
    height: 100%;
    @include flex-center;
  }

  &__student-svg {
    width: 100%;
    height: 100%;
    max-width: 400px;
  }

  // Right Panel - Form
  &__form-panel {
    flex: 1;
    display: flex;
    align-items: center;
    justify-content: center;
    background-color: $white;
    padding: $spacing-8;
    border-radius: $radius-xl 0 0 $radius-xl;
    margin: $spacing-4 0;

    @include mobile {
      flex: none;
      min-height: 100vh;
      margin: 0;
      border-radius: 0;
      padding: $spacing-6;
    }
  }

  &__form-container {
    width: 100%;
    max-width: 380px;
  }

  // Logo
  &__logo {
    @include flex(row, flex-start, center, $spacing-2);
    margin-bottom: $spacing-8;
  }

  &__logo-icon {
    width: 36px;
    height: 36px;
    @include flex-center;
    background-color: $auth-green-primary;
    border-radius: $radius-md;
    color: $white;

    svg {
      width: 20px;
      height: 20px;
    }
  }

  &__logo-text {
    font-size: $font-size-lg;
    font-weight: $font-weight-semibold;
    color: $gray-900;
  }

  // Title
  &__title {
    font-size: 2.5rem;
    font-weight: $font-weight-normal;
    color: $gray-900;
    margin-bottom: $spacing-8;
    line-height: 1.2;
    font-family: Georgia, 'Times New Roman', serif;

    @include mobile {
      font-size: $font-size-2xl;
      margin-bottom: $spacing-6;
    }
  }

  // Footer
  &__footer {
    margin-top: $spacing-8;
    text-align: center;
    font-size: $font-size-sm;
    color: $gray-500;

    @include mobile {
      margin-top: $spacing-6;
    }
  }

  &__footer-link {
    color: $auth-green-primary;
    font-weight: $font-weight-medium;
    margin-left: $spacing-1;
    text-decoration: none;

    &:hover {
      text-decoration: underline;
    }
  }
}

.auth-form {
  @include flex(column, flex-start, stretch, $spacing-4);

  &__field {
    position: relative;
  }

  &__input {
    width: 100%;
    padding: $spacing-4;
    font-size: $font-size-base;
    color: $gray-900;
    background-color: $white;
    border: 1px solid $gray-300;
    border-radius: $radius-lg;
    transition: border-color $transition-fast, box-shadow $transition-fast;

    &::placeholder {
      color: $gray-400;
    }

    &:focus {
      outline: none;
      border-color: $auth-green-primary;
      box-shadow: 0 0 0 3px rgba($auth-green-primary, 0.1);
    }
  }

  &__password-toggle {
    @include button-reset;
    position: absolute;
    right: $spacing-4;
    top: 50%;
    transform: translateY(-50%);
    color: $gray-400;
    @include flex-center;

    &:hover {
      color: $gray-600;
    }
  }

  &__submit {
    @include button-reset;
    width: 100%;
    padding: $spacing-4;
    margin-top: $spacing-2;
    font-size: $font-size-base;
    font-weight: $font-weight-medium;
    color: $white;
    background-color: $auth-green-primary;
    border-radius: $radius-lg;
    transition: background-color $transition-fast, transform $transition-fast;

    &:hover:not(:disabled) {
      background-color: color.adjust($auth-green-primary, $lightness: -8%);
    }

    &:active:not(:disabled) {
      transform: scale(0.98);
    }

    &:disabled {
      opacity: 0.7;
      cursor: not-allowed;
    }
  }

  &__spinner {
    @include spinner(20px, $white);
    display: inline-block;
  }

  &__after {
    margin-top: $spacing-4;
  }

  &__error {
    color: $error;
    font-size: $font-size-sm;
    text-align: center;
    padding: $spacing-3;
    background-color: $error-light;
    border-radius: $radius-md;
  }

  &__link {
    @include button-reset;
    color: $auth-green-primary;
    font-size: $font-size-sm;
    font-weight: $font-weight-medium;

    &:hover {
      text-decoration: underline;
    }
  }
}

// Utility classes
.mb-1 { margin-bottom: $spacing-1; }
.mb-2 { margin-bottom: $spacing-2; }
.mb-3 { margin-bottom: $spacing-3; }
.mb-4 { margin-bottom: $spacing-4; }

.mt-auto { margin-top: auto; }
.ml-auto { margin-left: auto; }

// Rich Text Editor
.rich-text-editor {
  border: 1px solid $gray-300;
  border-radius: $radius-md;
  overflow: hidden;
  transition: border-color $transition-fast, box-shadow $transition-fast;

  &:focus-within {
    border-color: $primary-blue;
    box-shadow: 0 0 0 3px rgba($primary-blue, 0.1);
  }

  &--error {
    border-color: $error;

    &:focus-within {
      box-shadow: 0 0 0 3px rgba($error, 0.1);
    }
  }

  &__toolbar {
    display: flex;
    align-items: center;
    gap: $spacing-1;
    padding: $spacing-2;
    background-color: $gray-50;
    border-bottom: 1px solid $gray-200;
    flex-wrap: wrap;
  }

  &__btn {
    @include button-reset;
    width: 32px;
    height: 32px;
    @include flex-center;
    border-radius: $radius-sm;
    color: $gray-600;
    transition: all $transition-fast;

    &:hover {
      background-color: $gray-200;
      color: $gray-900;
    }

    &--active {
      background-color: $primary-blue-light;
      color: $primary-blue;
    }
  }

  &__divider {
    width: 1px;
    height: 24px;
    background-color: $gray-300;
    margin: 0 $spacing-1;
  }

  &__content {
    min-height: 120px;
    padding: $spacing-3 $spacing-4;
    font-size: $font-size-sm;
    line-height: $line-height-relaxed;
    background-color: $white;

    .ProseMirror {
      outline: none;
      min-height: 100px;

      > * + * {
        margin-top: $spacing-2;
      }

      p {
        margin: 0;
      }

      h2 {
        font-size: $font-size-xl;
        font-weight: $font-weight-semibold;
        margin: 0;
        line-height: 1.3;
      }

      h3 {
        font-size: $font-size-lg;
        font-weight: $font-weight-medium;
        margin: 0;
        line-height: 1.3;
      }

      ul, ol {
        padding-left: $spacing-6;
        margin: 0;
      }

      li {
        margin: $spacing-1 0;

        p {
          margin: 0;
        }
      }

      a {
        color: $primary-blue;
        text-decoration: underline;
        cursor: pointer;
      }

      strong {
        font-weight: $font-weight-semibold;
      }

      em {
        font-style: italic;
      }

      u {
        text-decoration: underline;
      }

      s {
        text-decoration: line-through;
      }

      // Placeholder
      p.is-editor-empty:first-child::before {
        content: attr(data-placeholder);
        color: $gray-400;
        float: left;
        height: 0;
        pointer-events: none;
      }
    }
  }
}

// Rich Text Viewer (read-only display)
.rich-text-viewer {
  font-size: $font-size-sm;
  line-height: $line-height-relaxed;
  color: $gray-900;

  > * + * {
    margin-top: $spacing-2;
  }

  p {
    margin: 0;
  }

  h2 {
    font-size: $font-size-lg;
    font-weight: $font-weight-semibold;
    margin: 0;
  }

  h3 {
    font-size: $font-size-base;
    font-weight: $font-weight-medium;
    margin: 0;
  }

  ul, ol {
    padding-left: $spacing-6;
    margin: 0;
  }

  li {
    margin: $spacing-1 0;
  }

  a {
    color: $primary-blue;
    text-decoration: underline;

    &:hover {
      color: $primary-blue-dark;
    }
  }

  strong {
    font-weight: $font-weight-semibold;
  }

  em {
    font-style: italic;
  }

  u {
    text-decoration: underline;
  }

  s {
    text-decoration: line-through;
  }
}

// =====================================================
// Physio Schedule - Main Layout
// =====================================================

$ps-bg: #B8B4E5;
$ps-sidebar-bg: #C5C1EC;
$ps-card-bg: #E8E6F5;
$ps-nav-bg: #D4D0F0;
$ps-primary: #7C7AEA;
$ps-primary-dark: #6563C5;
$ps-event-green: #D4E157;
$ps-event-green-dark: #C4D147;
$ps-event-purple: #9B8FB9;

.physio-schedule {
  display: flex;
  flex-direction: column;
  min-height: 100vh;
  background: linear-gradient(135deg, $ps-bg 0%, #C9C6ED 50%, #D5D3F0 100%);
  padding: $spacing-5 $spacing-6;
  gap: $spacing-5;

  @include mobile {
    padding: $spacing-3;
    padding-top: 60px; // Space for hamburger button
    gap: $spacing-3;
  }

  // Top Row - Stats and Controls
  &__top-row {
    display: flex;
    align-items: center;
    justify-content: space-between;
    gap: $spacing-6;

    @include mobile {
      flex-direction: column;
      align-items: stretch;
      gap: $spacing-3;
    }
  }

  // Calendars Row - Both calendars aligned at TOP
  &__calendars-row {
    display: flex;
    align-items: flex-start; // Align both columns at top
    gap: $spacing-5;
    flex: 1;
    min-height: 0;

    @include mobile {
      flex-direction: column;
      gap: $spacing-3;
    }
  }

  // Left Sidebar Panel (Mini Calendar + Task List)
  &__sidebar {
    width: 300px;
    flex-shrink: 0;
    display: flex;
    flex-direction: column;
    gap: $spacing-4;

    @include mobile {
      width: 100%;
      gap: $spacing-3;
    }
  }

  &__sidebar-header {
    display: flex;
    align-items: center;
    gap: $spacing-3;
    padding: $spacing-2 0;
    margin-bottom: $spacing-2;
  }

  &__sidebar-logo {
    width: 36px;
    height: 36px;
    background-color: $ps-primary;
    border-radius: $radius-full;
    @include flex-center;
    color: $white;
    flex-shrink: 0;
  }

  &__sidebar-title {
    font-size: $font-size-lg;
    font-weight: $font-weight-bold;
    color: $gray-800;
    line-height: 1.2;
  }

  &__mini-calendar-card {
    background-color: $white;
    border-radius: $radius-xl;
    padding: $spacing-4;
    box-shadow: 0 2px 12px rgba($black, 0.06);

    @include mobile {
      display: none; // Hide mini calendar on mobile
    }
  }

  &__task-card {
    background-color: $white;
    border-radius: $radius-xl;
    padding: $spacing-4;
    box-shadow: 0 2px 12px rgba($black, 0.06);
  }

  &__task-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    margin-bottom: $spacing-3;
  }

  &__task-title {
    font-size: $font-size-base;
    font-weight: $font-weight-semibold;
    color: $gray-900;
  }

  &__task-actions {
    display: flex;
    align-items: center;
    gap: $spacing-2;
  }

  &__task-label {
    font-size: $font-size-xs;
    color: $gray-500;
  }

  &__task-check-btn {
    @include button-reset;
    color: $ps-primary;
  }

  &__add-task-btn {
    @include button-reset;
    display: flex;
    align-items: center;
    gap: $spacing-1;
    font-size: $font-size-xs;
    color: $ps-primary;
    font-weight: $font-weight-medium;

    &:hover {
      color: $ps-primary-dark;
    }
  }

  // Checklist
  &__checklist {
    display: flex;
    flex-direction: column;
    gap: $spacing-3;
  }

  &__checklist-empty {
    font-size: $font-size-sm;
    color: $gray-400;
    text-align: center;
    padding: $spacing-4;
  }

  &__checklist-item {
    display: flex;
    align-items: center;
    gap: $spacing-3;
  }

  &__checkbox {
    @include button-reset;
    width: 20px;
    height: 20px;
    border: 2px solid $gray-300;
    border-radius: $radius-full;
    @include flex-center;
    flex-shrink: 0;
    transition: all $transition-fast;

    &:hover {
      border-color: $ps-primary;
    }

    &--checked {
      background-color: $ps-primary;
      border-color: $ps-primary;
      color: $white;
    }
  }

  &__checklist-text {
    font-size: $font-size-sm;
    color: $gray-700;
    cursor: pointer;

    &:hover {
      color: $ps-primary;
    }

    &--completed {
      text-decoration: line-through;
      color: $gray-400;
    }
  }

  // Other Calendar List
  &__other-list {
    display: flex;
    flex-direction: column;
    gap: $spacing-3;
  }

  &__other-empty {
    font-size: $font-size-sm;
    color: $gray-400;
    text-align: center;
    padding: $spacing-4;
  }

  &__other-item {
    display: flex;
    align-items: center;
    gap: $spacing-3;
  }

  &__other-check {
    width: 20px;
    height: 20px;
    border-radius: $radius-full;
    background-color: $ps-event-green;
    @include flex-center;
    color: $gray-700;
    flex-shrink: 0;
  }

  &__other-text {
    font-size: $font-size-sm;
    color: $gray-500;
  }

  // Main Content Area (Calendar)
  &__main {
    flex: 1;
    display: flex;
    flex-direction: column;
    min-width: 0;
    gap: $spacing-4;

    @include mobile {
      gap: $spacing-3;
    }
  }

  // Top Bar Controls
  &__topbar {
    display: flex;
    align-items: center;
    gap: $spacing-4;

    @include mobile {
      flex-direction: column;
      gap: $spacing-3;
    }
  }

  &__view-toggle {
    display: flex;
    background-color: $white;
    border-radius: $radius-full;
    padding: 4px;
    box-shadow: 0 2px 8px rgba($black, 0.08);

    @include mobile {
      width: 100%;
      justify-content: center;
    }
  }

  &__view-btn {
    @include button-reset;
    padding: $spacing-2 $spacing-5;
    font-size: $font-size-sm;
    font-weight: $font-weight-medium;
    color: $gray-500;
    border-radius: $radius-full;
    transition: all $transition-fast;

    @include mobile {
      flex: 1;
      padding: $spacing-2 $spacing-3;
      font-size: $font-size-xs;
      text-align: center;
    }

    &:hover {
      color: $gray-700;
    }

    &--active {
      background-color: $ps-primary;
      color: $white;
    }
  }

  &__topbar-right {
    display: flex;
    align-items: center;
    gap: $spacing-4;
  }

  &__theme-toggle {
    display: flex;
    align-items: center;
    gap: $spacing-2;
  }

  &__theme-label {
    font-size: $font-size-xs;
    color: $gray-400;

    &--active {
      color: $gray-700;
      font-weight: $font-weight-medium;
    }
  }

  &__theme-switch {
    width: 48px;
    height: 26px;
    background-color: $white;
    border-radius: $radius-full;
    padding: 3px;
    display: flex;
    align-items: center;
    justify-content: flex-end;
    gap: $spacing-1;
    box-shadow: inset 0 1px 3px rgba($black, 0.1);
  }

  &__theme-switch-knob {
    width: 20px;
    height: 20px;
    background-color: $ps-primary;
    border-radius: $radius-full;
    position: absolute;
    left: 3px;
  }

  &__icon-btn {
    @include button-reset;
    width: 36px;
    height: 36px;
    @include flex-center;
    border-radius: $radius-full;
    color: $gray-600;
    transition: all $transition-fast;

    &:hover {
      background-color: rgba($white, 0.5);
      color: $gray-800;
    }
  }

  &__topbar-avatar {
    width: 36px;
    height: 36px;
    border-radius: $radius-full;
    overflow: hidden;
    border: 2px solid $white;
    box-shadow: 0 2px 8px rgba($black, 0.1);

    img {
      width: 100%;
      height: 100%;
      object-fit: cover;
    }
  }

  &__page-header {
    flex-shrink: 0;

    @include mobile {
      text-align: center;
    }
  }

  &__page-title {
    font-size: $font-size-3xl;
    font-weight: $font-weight-bold;
    color: $gray-900;
    margin-bottom: $spacing-1;

    @include mobile {
      font-size: $font-size-xl;
    }
  }

  &__page-subtitle {
    font-size: $font-size-sm;
    color: $gray-500;

    @include mobile {
      font-size: $font-size-xs;
    }
  }

  &__stats-cards {
    display: flex;
    align-items: center;
    gap: $spacing-4;

    @include mobile {
      flex-wrap: wrap;
      justify-content: center;
      gap: $spacing-3;
    }
  }

  &__stat-card {
    background-color: transparent;
    text-align: right;

    @include mobile {
      text-align: center;
    }
  }

  &__stat-label {
    display: block;
    font-size: $font-size-xs;
    color: $gray-500;
    margin-bottom: $spacing-1;
  }

  &__stat-value {
    display: flex;
    align-items: baseline;
    justify-content: flex-end;
    gap: $spacing-1;

    @include mobile {
      justify-content: center;
    }
  }

  &__stat-number {
    font-size: $font-size-3xl;
    font-weight: $font-weight-bold;
    color: $gray-900;

    @include mobile {
      font-size: $font-size-xl;
    }
  }

  &__stat-unit {
    font-size: $font-size-base;
    color: $gray-500;
  }

  &__add-task-btn-main {
    @include button-reset;
    display: flex;
    align-items: center;
    gap: $spacing-2;
    padding: $spacing-3 $spacing-5;
    background-color: $white;
    color: $gray-700;
    border-radius: $radius-full;
    font-size: $font-size-sm;
    font-weight: $font-weight-medium;
    box-shadow: 0 2px 8px rgba($black, 0.08);
    transition: all $transition-fast;

    &:hover {
      background-color: $ps-primary;
      color: $white;
    }
  }

  // Week Navigator
  &__week-nav {
    display: flex;
    align-items: center;
    justify-content: space-between;
    margin-bottom: $spacing-4;

    @include mobile {
      flex-direction: column;
      gap: $spacing-2;
      align-items: stretch;
    }
  }

  &__date-title {
    font-size: $font-size-xl;
    font-weight: $font-weight-semibold;
    color: $gray-900;

    @include mobile {
      font-size: $font-size-lg;
      text-align: center;
    }
  }

  &__week-nav-actions {
    display: flex;
    align-items: center;
    gap: $spacing-3;

    @include mobile {
      justify-content: center;
    }
  }

  &__today-btn {
    @include button-reset;
    padding: $spacing-2 $spacing-4;
    background-color: transparent;
    color: $ps-primary;
    font-size: $font-size-sm;
    font-weight: $font-weight-semibold;
    transition: all $transition-fast;

    &:hover {
      color: $ps-primary-dark;
    }
  }

  &__nav-arrows {
    display: flex;
    gap: $spacing-1;
  }

  &__arrow-btn {
    @include button-reset;
    width: 32px;
    height: 32px;
    @include flex-center;
    background-color: transparent;
    border-radius: $radius-md;
    color: $gray-500;
    transition: all $transition-fast;

    &:hover {
      background-color: $white;
      color: $ps-primary;
    }
  }

  // Calendar Container
  &__calendar-container {
    flex: 1;
    background-color: $white;
    border-radius: $radius-xl;
    overflow: hidden;
    box-shadow: 0 4px 20px rgba($black, 0.08);
    max-height: calc(100vh - 280px); // Contained height based on viewport
    display: flex;
    flex-direction: column;

    @include mobile {
      max-height: calc(100vh - 200px);
    }
  }

  // Details Panel
  &__details-panel {
    position: fixed;
    right: 0;
    top: 0;
    bottom: 0;
    width: 360px;
    background-color: $white;
    box-shadow: -4px 0 20px rgba($black, 0.1);
    z-index: 100;
    overflow-y: auto;

    @include mobile {
      top: auto;
      left: 0;
      right: 0;
      bottom: 0;
      width: 100%;
      max-height: 80vh;
      border-radius: $radius-xl $radius-xl 0 0;
      box-shadow: 0 -4px 20px rgba($black, 0.15);

      // Drag handle
      &::before {
        content: '';
        position: absolute;
        top: $spacing-2;
        left: 50%;
        transform: translateX(-50%);
        width: 36px;
        height: 4px;
        background-color: $gray-300;
        border-radius: $radius-full;
      }
    }
  }
}

// =====================================================
// Mini Calendar (redesigned)
// =====================================================

.mini-cal {
  &__header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    margin-bottom: $spacing-3;
  }

  &__month {
    font-size: $font-size-base;
    font-weight: $font-weight-semibold;
    color: $gray-900;
  }

  &__nav {
    display: flex;
    gap: $spacing-1;
  }

  &__nav-btn {
    @include button-reset;
    width: 28px;
    height: 28px;
    @include flex-center;
    border-radius: $radius-md;
    color: $gray-400;
    transition: all $transition-fast;

    &:hover {
      background-color: $ps-bg;
      color: $ps-primary;
    }
  }

  &__weekdays {
    display: grid;
    grid-template-columns: repeat(7, 1fr);
    margin-bottom: $spacing-2;
  }

  &__weekday {
    text-align: center;
    font-size: $font-size-xs;
    font-weight: $font-weight-medium;
    color: $gray-400;
    padding: $spacing-1;
  }

  &__grid {
    display: grid;
    grid-template-columns: repeat(7, 1fr);
    gap: 2px;
  }

  &__day {
    @include button-reset;
    width: 100%;
    aspect-ratio: 1;
    @include flex-center;
    font-size: $font-size-sm;
    color: $gray-600;
    border-radius: $radius-md;
    transition: all $transition-fast;
    position: relative;

    &:hover {
      background-color: $ps-bg;
    }

    &--empty {
      visibility: hidden;
    }

    &--today {
      background-color: $ps-primary;
      color: $white;
      font-weight: $font-weight-semibold;
    }

    &--selected {
      background-color: $ps-event-green;
      color: $gray-900;
      font-weight: $font-weight-semibold;
    }

    &--has-events::after {
      content: '';
      position: absolute;
      bottom: 4px;
      width: 4px;
      height: 4px;
      border-radius: $radius-full;
      background-color: $ps-primary;
    }

    &--has-exam {
      border: 2px solid $error;
      position: relative;
    }
  }

  // Exam indicator dot
  &__exam-dot {
    position: absolute;
    top: 2px;
    right: 2px;
    width: 6px;
    height: 6px;
    border-radius: $radius-full;
    background-color: $error;
  }
}

// =====================================================
// Event Details Panel (redesigned)
// =====================================================

.event-panel {
  padding: $spacing-5;

  @include mobile {
    padding: $spacing-4;
    padding-top: calc($spacing-4 + 20px); // Space for drag handle
    max-height: 80vh;
    overflow-y: auto;
  }

  &__header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    margin-bottom: $spacing-5;

    @include mobile {
      margin-bottom: $spacing-3;
    }
  }

  &__title {
    font-size: $font-size-lg;
    font-weight: $font-weight-semibold;
    color: $gray-900;
  }

  &__close {
    @include button-reset;
    width: 36px;
    height: 36px;
    @include flex-center;
    border-radius: $radius-full;
    color: $gray-400;
    transition: all $transition-fast;

    &:hover {
      background-color: $gray-100;
      color: $gray-600;
    }
  }

  &__card {
    padding: $spacing-4;
    border-radius: $radius-lg;
    margin-bottom: $spacing-5;

    @include mobile {
      padding: $spacing-3;
      margin-bottom: $spacing-3;
    }

    &--clinical { background-color: rgba($ps-event-green, 0.3); }
    &--lecture { background-color: rgba($ps-event-purple, 0.3); }
    &--study { background-color: rgba($ps-primary, 0.15); }
    &--task { background-color: $gray-100; }
    &--homework { background-color: rgba(#FF9800, 0.15); }
    &--exam { background-color: rgba(#F44336, 0.15); }
    &--meeting { background-color: rgba(#2196F3, 0.15); }
    &--personal { background-color: rgba(#9C27B0, 0.15); }
    &--deadline { background-color: rgba(#E91E63, 0.15); }
  }

  &__category {
    display: flex;
    align-items: center;
    gap: $spacing-2;
    margin-bottom: $spacing-2;
  }

  &__category-icon {
    font-size: $font-size-base;
  }

  &__category-label {
    font-size: $font-size-xs;
    font-weight: $font-weight-medium;
    color: $gray-600;
    text-transform: uppercase;
    letter-spacing: 0.5px;
  }

  &__badge {
    padding: 2px $spacing-2;
    background-color: $error;
    color: $white;
    font-size: $font-size-xs;
    font-weight: $font-weight-medium;
    border-radius: $radius-sm;
    margin-left: auto;
  }

  &__event-title {
    font-size: $font-size-lg;
    font-weight: $font-weight-semibold;
    color: $gray-900;

    &--completed {
      text-decoration: line-through;
      color: $gray-500;
    }
  }

  &__content {
    display: flex;
    flex-direction: column;
    gap: $spacing-4;
  }

  &__section {
    &-title {
      font-size: $font-size-xs;
      font-weight: $font-weight-medium;
      color: $gray-500;
      text-transform: uppercase;
      letter-spacing: 0.5px;
      margin-bottom: $spacing-1;
    }

    &-content {
      font-size: $font-size-sm;
      color: $gray-700;
      line-height: $line-height-relaxed;
    }
  }

  &__complete-btn {
    @include button-reset;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: $spacing-2;
    width: 100%;
    padding: $spacing-3;
    background-color: $gray-100;
    color: $gray-700;
    border-radius: $radius-lg;
    font-size: $font-size-sm;
    font-weight: $font-weight-medium;
    transition: all $transition-fast;

    &:hover {
      background-color: $ps-primary;
      color: $white;
    }

    &--completed {
      background-color: $ps-event-green;
      color: $gray-900;
    }
  }

  &__actions {
    display: flex;
    flex-direction: column;
    gap: $spacing-3;
    margin-top: $spacing-5;
    padding-top: $spacing-5;
    border-top: 1px solid $gray-200;

    @include mobile {
      flex-direction: row;
      gap: $spacing-2;
      padding-bottom: env(safe-area-inset-bottom, $spacing-3);
    }
  }

  &__confirm-delete {
    display: flex;
    gap: $spacing-2;
  }

  &__action-btn {
    @include button-reset;
    display: flex;
    align-items: center;
    justify-content: center;
    padding: $spacing-3;
    border-radius: $radius-lg;
    font-size: $font-size-sm;
    font-weight: $font-weight-medium;
    transition: all $transition-fast;

    @include mobile {
      flex: 1;
    }

    &--secondary {
      background-color: $ps-primary;
      color: $white;

      &:hover {
        background-color: $ps-primary-dark;
      }
    }

    &--ghost {
      background-color: transparent;
      color: $gray-600;

      &:hover {
        background-color: $gray-100;
      }
    }

    &--danger {
      background-color: $error;
      color: $white;

      &:hover {
        background-color: color.adjust($error, $lightness: -10%);
      }
    }
  }
}

// =============================================
// Dashboard Styles
// =============================================

.dashboard {
  padding: $spacing-6;
  max-width: 1600px;
  margin: 0 auto;

  @include mobile {
    padding: $spacing-4;
  }

  // Dashboard Header
  &__header {
    @include flex(row, space-between, flex-start);
    margin-bottom: $spacing-6;

    @include mobile {
      flex-direction: column;
      gap: $spacing-3;
    }
  }

  &__greeting {
    @include flex(column, flex-start, flex-start, $spacing-1);
  }

  &__title {
    font-size: $font-size-2xl;
    font-weight: $font-weight-semibold;
    color: $gray-900;

    @include mobile {
      font-size: $font-size-xl;
    }
  }

  &__subtitle {
    font-size: $font-size-sm;
    color: $gray-500;
  }

  &__date {
    @include flex(column, flex-end, flex-end);
    text-align: right;

    @include mobile {
      align-items: flex-start;
      text-align: left;
    }
  }

  &__date-day {
    font-size: $font-size-lg;
    font-weight: $font-weight-semibold;
    color: $gray-900;
  }

  &__date-full {
    font-size: $font-size-sm;
    color: $gray-500;
  }

  // Quick Stats
  &__stats {
    display: grid;
    grid-template-columns: repeat(4, 1fr);
    gap: $spacing-4;
    margin-bottom: $spacing-6;

    @include mobile {
      grid-template-columns: repeat(2, 1fr);
      gap: $spacing-3;
    }
  }

  &__stat {
    @include flex(column, center, center, $spacing-1);
    background-color: $white;
    padding: $spacing-4;
    border-radius: $radius-lg;
    box-shadow: $shadow-sm;
    border: 1px solid $gray-200;
  }

  &__stat-value {
    font-size: $font-size-2xl;
    font-weight: $font-weight-bold;
    color: $primary-blue;
  }

  &__stat-label {
    font-size: $font-size-xs;
    color: $gray-500;
    text-transform: uppercase;
    letter-spacing: 0.5px;
  }

  // Dashboard Grid
  &__grid {
    display: grid;
    grid-template-columns: 1fr 1fr 1fr;
    gap: $spacing-5;

    @media (max-width: $breakpoint-xl) {
      grid-template-columns: 1fr 1fr;
    }

    @include mobile {
      grid-template-columns: 1fr;
      gap: $spacing-4;
    }
  }

  &__column {
    @include flex(column, flex-start, stretch, $spacing-5);

    @include mobile {
      gap: $spacing-4;
    }
  }
}

// Dashboard Card Base
.dashboard-card {
  background-color: $white;
  border-radius: $radius-lg;
  box-shadow: $shadow-sm;
  border: 1px solid $gray-200;
  overflow: hidden;

  &__header {
    @include flex(row, space-between, center);
    padding: $spacing-4;
    border-bottom: 1px solid $gray-100;
  }

  &__title {
    @include flex(row, flex-start, center, $spacing-2);
    font-size: $font-size-base;
    font-weight: $font-weight-semibold;
    color: $gray-900;

    svg {
      color: $primary-blue;
    }
  }

  &__count {
    font-size: $font-size-xs;
    color: $gray-500;
    background-color: $gray-100;
    padding: $spacing-1 $spacing-2;
    border-radius: $radius-full;
  }

  &__content {
    padding: $spacing-4;
  }

  &__empty {
    @include flex(column, center, center, $spacing-2);
    padding: $spacing-6;
    color: $gray-400;
    text-align: center;

    svg {
      width: 32px;
      height: 32px;
    }

    span {
      font-size: $font-size-sm;
    }
  }
}

// Tasks List
.tasks-list {
  list-style: none;
  @include flex(column, flex-start, stretch, $spacing-2);

  &__item {
    @include flex(row, flex-start, center, $spacing-3);
    padding: $spacing-2 0;
    border-bottom: 1px solid $gray-100;

    &:last-child {
      border-bottom: none;
    }
  }

  &__checkbox {
    @include button-reset;
    width: 20px;
    height: 20px;
    border: 2px solid $gray-300;
    border-radius: $radius-sm;
    @include flex-center;
    flex-shrink: 0;
    transition: all $transition-fast;

    &:hover {
      border-color: $primary-blue;
    }

    &--checked {
      background-color: $success;
      border-color: $success;
      color: $white;
    }
  }

  &__content {
    flex: 1;
    min-width: 0;
  }

  &__title {
    display: block;
    font-size: $font-size-sm;
    color: $gray-900;
    @include text-truncate;

    &--completed {
      text-decoration: line-through;
      color: $gray-400;
    }
  }

  &__time {
    font-size: $font-size-xs;
    color: $gray-500;
  }

  &__category {
    font-size: 10px;
    font-weight: $font-weight-medium;
    text-transform: uppercase;
    padding: $spacing-1 $spacing-2;
    border-radius: $radius-sm;
    flex-shrink: 0;

    &--task {
      background-color: $gray-100;
      color: $gray-600;
    }

    &--homework {
      background-color: $warning-light;
      color: $warning;
    }

    &--exam {
      background-color: $error-light;
      color: $error;
    }
  }
}

// Exams List
.exams-list {
  list-style: none;
  @include flex(column, flex-start, stretch, $spacing-3);

  &__item {
    @include flex(row, flex-start, center, $spacing-3);
    padding: $spacing-3;
    background-color: $gray-50;
    border-radius: $radius-md;
    cursor: pointer;
    transition: all $transition-fast;

    &:hover {
      background-color: $gray-100;
    }

    &--urgent {
      background-color: $error-light;

      .exams-list__indicator {
        background-color: $error;
      }

      .exams-list__countdown {
        color: $error;
        font-weight: $font-weight-semibold;
      }
    }

    &--soon {
      background-color: $warning-light;

      .exams-list__indicator {
        background-color: $warning;
      }

      .exams-list__countdown {
        color: $warning;
      }
    }
  }

  &__indicator {
    width: 4px;
    height: 40px;
    background-color: $primary-blue;
    border-radius: $radius-full;
    flex-shrink: 0;
  }

  &__content {
    flex: 1;
    min-width: 0;
  }

  &__subject {
    display: block;
    font-size: $font-size-sm;
    font-weight: $font-weight-medium;
    color: $gray-900;
    margin-bottom: $spacing-1;
  }

  &__meta {
    @include flex(row, flex-start, center, $spacing-2);
    font-size: $font-size-xs;
    color: $gray-500;
  }

  &__date {
    color: $gray-600;
  }

  &__time {
    &::before {
      content: '';
      margin-right: $spacing-2;
    }
  }

  &__countdown {
    font-size: $font-size-xs;
    font-weight: $font-weight-medium;
    color: $gray-500;
    flex-shrink: 0;
  }
}

// Homework List
.homework-list {
  list-style: none;
  @include flex(column, flex-start, stretch, $spacing-2);

  &__item {
    @include flex(row, flex-start, center, $spacing-3);
    padding: $spacing-3;
    background-color: $gray-50;
    border-radius: $radius-md;
    transition: all $transition-fast;

    &--completed {
      opacity: 0.6;

      .homework-list__title {
        text-decoration: line-through;
        color: $gray-400;
      }
    }

    &--urgent {
      background-color: $error-light;
    }

    &--soon {
      background-color: $warning-light;
    }
  }

  &__checkbox {
    @include button-reset;
    width: 18px;
    height: 18px;
    border: 2px solid $gray-300;
    border-radius: $radius-full;
    flex-shrink: 0;
    transition: all $transition-fast;

    &:hover {
      border-color: $primary-blue;
    }

    &--checked {
      background-color: $success;
      border-color: $success;

      &::after {
        content: '';
        width: 6px;
        height: 6px;
        background-color: $white;
        border-radius: $radius-full;
        display: block;
        margin: auto;
      }
    }
  }

  &__content {
    flex: 1;
    min-width: 0;
    cursor: pointer;
  }

  &__title {
    display: block;
    font-size: $font-size-sm;
    font-weight: $font-weight-medium;
    color: $gray-900;
    margin-bottom: $spacing-1;
  }

  &__meta {
    @include flex(row, flex-start, center, $spacing-2);
    font-size: $font-size-xs;
  }

  &__subject {
    color: $gray-500;
  }

  &__due {
    color: $gray-400;

    &::before {
      content: '';
      margin-right: $spacing-2;
    }
  }
}

// Classes Timeline
.classes-timeline {
  @include flex(column, flex-start, stretch);

  &__item {
    @include flex(row, flex-start, flex-start, $spacing-3);
    padding: $spacing-2 0;
    cursor: pointer;
    transition: all $transition-fast;

    &:hover {
      .classes-timeline__content {
        background-color: $gray-100;
      }
    }

    &--ongoing {
      .classes-timeline__dot {
        background-color: $success;
        box-shadow: 0 0 0 3px rgba($success, 0.2);
      }

      .classes-timeline__subject {
        color: $success;
      }
    }

    &--next {
      .classes-timeline__dot {
        background-color: $primary-blue;
      }
    }
  }

  &__time-block {
    @include flex(column, flex-start, flex-end);
    width: 60px;
    flex-shrink: 0;
  }

  &__start {
    font-size: $font-size-xs;
    font-weight: $font-weight-medium;
    color: $gray-900;
  }

  &__end {
    font-size: 10px;
    color: $gray-400;
  }

  &__line {
    @include flex(column, flex-start, center);
    width: 20px;
    flex-shrink: 0;
    position: relative;
  }

  &__dot {
    width: 10px;
    height: 10px;
    background-color: $gray-300;
    border-radius: $radius-full;
    flex-shrink: 0;
    margin-top: 4px;
  }

  &__connector {
    width: 2px;
    flex: 1;
    background-color: $gray-200;
    min-height: 40px;
  }

  &__content {
    flex: 1;
    padding: $spacing-2 $spacing-3;
    background-color: $gray-50;
    border-radius: $radius-md;
    transition: background-color $transition-fast;
  }

  &__subject {
    display: block;
    font-size: $font-size-sm;
    font-weight: $font-weight-medium;
    color: $gray-900;
    margin-bottom: $spacing-1;
  }

  &__location {
    @include flex(row, flex-start, center, $spacing-1);
    font-size: $font-size-xs;
    color: $gray-500;
    margin-bottom: $spacing-1;

    svg {
      flex-shrink: 0;
    }
  }

  &__instructor {
    font-size: $font-size-xs;
    color: $gray-400;
  }

  &__badge {
    display: inline-block;
    font-size: 10px;
    font-weight: $font-weight-semibold;
    text-transform: uppercase;
    padding: 2px $spacing-2;
    border-radius: $radius-sm;
    margin-top: $spacing-1;

    &--ongoing {
      background-color: $success;
      color: $white;
    }

    &--next {
      background-color: $primary-blue;
      color: $white;
    }
  }
}

// AI Study Card
.ai-study {
  &__tabs {
    @include flex(row, flex-end, center, $spacing-1);
  }

  &__tab {
    @include button-reset;
    font-size: $font-size-xs;
    font-weight: $font-weight-medium;
    color: $gray-400;
    padding: $spacing-1 $spacing-2;
    border-radius: $radius-sm;
    transition: all $transition-fast;

    &:hover {
      color: $gray-600;
    }

    &--active {
      background-color: $gray-100;
      color: $gray-900;
    }
  }

  &__intro {
    @include flex(row, space-between, center);
    margin-bottom: $spacing-4;
    padding-bottom: $spacing-3;
    border-bottom: 1px solid $gray-100;

    p {
      font-size: $font-size-xs;
      color: $gray-500;
      flex: 1;
    }
  }

  &__refresh {
    @include button-reset;
    @include flex(row, center, center, $spacing-1);
    font-size: $font-size-xs;
    font-weight: $font-weight-medium;
    color: $primary-blue;
    padding: $spacing-1 $spacing-2;
    border-radius: $radius-sm;
    transition: all $transition-fast;

    &:hover {
      background-color: $primary-blue-light;
    }

    svg {
      width: 14px;
      height: 14px;
    }
  }

  &__question-list {
    list-style: none;
    @include flex(column, flex-start, stretch, $spacing-3);
  }

  &__question-item {
    @include flex(row, flex-start, flex-start, $spacing-3);
    padding: $spacing-3;
    background-color: $gray-50;
    border-radius: $radius-md;
    cursor: pointer;
    transition: all $transition-fast;

    &:hover {
      background-color: $gray-100;
    }

    svg {
      color: $gray-400;
      flex-shrink: 0;
      margin-top: 4px;
    }
  }

  &__question-number {
    @include flex-center;
    width: 24px;
    height: 24px;
    background-color: $primary-blue-light;
    color: $primary-blue;
    font-size: $font-size-xs;
    font-weight: $font-weight-semibold;
    border-radius: $radius-full;
    flex-shrink: 0;
  }

  &__question-content {
    flex: 1;
    min-width: 0;
  }

  &__question-text {
    font-size: $font-size-sm;
    color: $gray-900;
    margin-bottom: $spacing-2;
    line-height: $line-height-normal;
  }

  &__question-meta {
    @include flex(row, flex-start, center, $spacing-2);
  }

  &__question-topic {
    font-size: $font-size-xs;
    color: $gray-500;
  }

  &__question-difficulty {
    font-size: 10px;
    font-weight: $font-weight-medium;
    text-transform: uppercase;
    padding: 2px $spacing-2;
    border-radius: $radius-sm;

    &--easy {
      background-color: $success-light;
      color: $success;
    }

    &--medium {
      background-color: $warning-light;
      color: $warning;
    }

    &--hard {
      background-color: $error-light;
      color: $error;
    }
  }

  &__notes-list {
    list-style: none;
    @include flex(column, flex-start, stretch, $spacing-3);
  }

  &__note-item {
    padding: $spacing-3;
    background-color: $gray-50;
    border-radius: $radius-md;
    cursor: pointer;
    transition: all $transition-fast;

    &:hover {
      background-color: $gray-100;
    }
  }

  &__note-header {
    @include flex(row, space-between, center);
    margin-bottom: $spacing-1;
  }

  &__note-title {
    font-size: $font-size-sm;
    font-weight: $font-weight-medium;
    color: $gray-900;
  }

  &__note-date {
    font-size: $font-size-xs;
    color: $gray-400;
  }

  &__note-subject {
    display: block;
    font-size: $font-size-xs;
    color: $primary-blue;
    margin-bottom: $spacing-2;
  }

  &__note-excerpt {
    font-size: $font-size-xs;
    color: $gray-500;
    line-height: $line-height-normal;
    @include text-clamp(2);
  }

  &__footer {
    padding: $spacing-3 $spacing-4;
    border-top: 1px solid $gray-100;
    background-color: $gray-50;
  }

  &__powered {
    @include flex(row, center, center, $spacing-2);
    font-size: $font-size-xs;
    color: $gray-400;

    svg {
      width: 14px;
      height: 14px;
      color: $warning;
    }
  }
}

// Mini Calendar Card adjustments for Dashboard
.dashboard-card--mini-calendar {
  .mini-cal {
    padding: 0;
  }
}

// =============================================
// Dashboard V2 - New Design Layout
// =============================================

// Dashboard V2 Primary Color
$dash-primary: #D4E157;
$dash-primary-dark: #C0CA33;
$dash-primary-light: #F0F4C3;
$dash-orange: #D4E157;
$dash-orange-light: #ffccbc;
$dash-blue: #42a5f5;
$dash-blue-light: #bbdefb;
$dash-red: #ef5350;
$dash-red-light: #ffcdd2;

.dashboard-v2 {
  display: grid;
  grid-template-columns: 1fr 400px;
  gap: $spacing-8;
  padding: $spacing-6;
  max-width: 1400px;
  margin: 0 auto;
  min-height: calc(100vh - 80px);

  @media (max-width: $breakpoint-xl) {
    grid-template-columns: 1fr 360px;
    gap: $spacing-6;
  }

  @include mobile {
    grid-template-columns: 1fr;
    padding: $spacing-4;
    gap: $spacing-5;
  }

  &__left {
    @include flex(column, flex-start, stretch, $spacing-8);

    @include mobile {
      gap: $spacing-6;
    }
  }

  &__right {
    @include flex(column, flex-start, stretch, $spacing-6);

    @include mobile {
      gap: $spacing-5;
    }
  }

  &__header {
    @include flex(row, space-between, center, $spacing-4);
  }

  &__search {
    @include flex(row, flex-start, center, $spacing-3);
    flex: 1;
    background-color: $white;
    border: 1px solid $gray-200;
    border-radius: $radius-full;
    padding: $spacing-3 $spacing-4;
    max-width: 280px;

    svg {
      color: $gray-400;
      flex-shrink: 0;
    }
  }

  &__search-input {
    border: none;
    outline: none;
    background: transparent;
    font-size: $font-size-sm;
    color: $gray-600;
    width: 100%;

    &::placeholder {
      color: $gray-400;
    }
  }

  &__avatar {
    width: 44px;
    height: 44px;
    border-radius: $radius-full;
    overflow: hidden;
    border: 2px solid $dash-primary;
    flex-shrink: 0;

    img {
      width: 100%;
      height: 100%;
      object-fit: cover;
    }
  }
}

// Today Tasks Component - New Design
.today-tasks {
  &__title {
    font-size: $font-size-xl;
    font-weight: $font-weight-bold;
    color: $gray-900;
    margin-bottom: $spacing-2;
  }

  &__dot {
    color: $dash-primary;
  }

  &__label {
    font-size: $font-size-sm;
    color: $gray-500;
    margin-bottom: $spacing-5;
    padding-left: $spacing-2;
  }

  &__content {
    // Content wrapper
  }

  &__empty {
    @include flex(column, center, center, $spacing-3);
    padding: $spacing-8;
    color: $gray-400;
    text-align: center;

    svg {
      width: 40px;
      height: 40px;
    }
  }

  &__list {
    list-style: none;
    @include flex(column, flex-start, stretch, $spacing-3);
  }

  &__item {
    @include flex(row, flex-start, center, $spacing-4);
    padding: $spacing-4 0;
    border-bottom: 1px solid $gray-100;

    &:last-child {
      border-bottom: none;
    }

    &--completed {
      opacity: 0.6;
    }
  }

  &__indicator {
    width: 8px;
    height: 8px;
    border-radius: $radius-full;
    flex-shrink: 0;

    &--task {
      background-color: $dash-blue;
    }

    &--homework {
      background-color: $dash-orange;
    }

    &--exam {
      background-color: $dash-red;
    }
  }

  &__info {
    flex: 1;
    min-width: 0;
  }

  &__name {
    display: block;
    font-size: $font-size-sm;
    font-weight: $font-weight-medium;
    color: $gray-900;
    margin-bottom: 2px;
    @include text-truncate;

    &--completed {
      text-decoration: line-through;
      color: $gray-400;
    }
  }

  &__meta {
    font-size: $font-size-xs;
    color: $gray-400;
  }

  &__category {
    font-size: 11px;
    font-weight: $font-weight-medium;
    padding: $spacing-1 $spacing-3;
    border-radius: $radius-sm;
    flex-shrink: 0;
    margin-right: $spacing-2;

    &--task {
      background-color: $gray-100;
      color: $gray-600;
    }

    &--homework {
      background-color: $dash-orange-light;
      color: $dash-orange;
    }

    &--exam {
      background-color: $dash-red-light;
      color: $dash-red;
    }
  }

  &__more {
    @include button-reset;
    @include flex-center;
    width: 32px;
    height: 32px;
    color: $gray-400;
    flex-shrink: 0;

    &:hover {
      color: $gray-600;
    }
  }

  &__action {
    @include button-reset;
    @include flex(row, center, center, $spacing-1);
    font-size: $font-size-xs;
    font-weight: $font-weight-medium;
    padding: $spacing-2 $spacing-3;
    border-radius: $radius-md;
    flex-shrink: 0;
    transition: all $transition-fast;

    &--add {
      background-color: $dash-orange;
      color: $white;

      &:hover {
        background-color: color.adjust($dash-orange, $lightness: -8%);
      }

      svg {
        width: 12px;
        height: 12px;
      }
    }

    &--done {
      background-color: transparent;
      color: $dash-orange;
      border: 1px solid $dash-orange;

      &:hover {
        background-color: $dash-orange-light;
      }
    }
  }
}

// Dashboard Calendar - New Design
.dash-calendar {
  background-color: $white;
  border-radius: $radius-lg;
  padding: $spacing-5;

  &__header {
    @include flex(row, space-between, center);
    margin-bottom: $spacing-5;
  }

  &__month {
    font-size: $font-size-lg;
    font-weight: $font-weight-bold;
    color: $gray-900;
  }

  &__nav {
    @include flex(row, flex-end, center, $spacing-1);
  }

  &__nav-btn {
    @include button-reset;
    @include flex-center;
    width: 28px;
    height: 28px;
    border-radius: $radius-md;
    color: $gray-400;
    transition: all $transition-fast;

    &:hover {
      background-color: $gray-100;
      color: $gray-600;
    }
  }

  &__weekdays {
    display: grid;
    grid-template-columns: repeat(7, 1fr);
    margin-bottom: $spacing-3;
  }

  &__weekday {
    text-align: center;
    font-size: $font-size-xs;
    font-weight: $font-weight-medium;
    color: $gray-500;
    padding: $spacing-2;
  }

  &__grid {
    display: grid;
    grid-template-columns: repeat(7, 1fr);
    gap: 2px;
  }

  &__day {
    @include button-reset;
    aspect-ratio: 1;
    @include flex-center;
    font-size: $font-size-sm;
    color: $gray-600;
    border-radius: $radius-md;
    transition: all $transition-fast;
    position: relative;

    &:hover {
      background-color: $gray-100;
    }

    &--empty {
      visibility: hidden;
    }

    &--today {
      background-color: $dash-primary;
      color: $gray-900;
      font-weight: $font-weight-semibold;
    }

    &--selected {
      background-color: $dash-primary-light;
      color: $gray-900;
      font-weight: $font-weight-medium;
    }

    &--has-events {
      background-color: $dash-orange;
      color: $white;
      font-weight: $font-weight-medium;

      &:hover {
        background-color: color.adjust($dash-orange, $lightness: -5%);
      }
    }
  }
}

// Upcoming Section - New Design
.upcoming {
  &__title {
    font-size: $font-size-lg;
    font-weight: $font-weight-bold;
    color: $gray-900;
    margin-bottom: $spacing-4;
  }

  &__dot {
    color: $dash-primary;
  }

  &__content {
    margin-bottom: $spacing-4;
  }

  &__empty {
    @include flex(column, center, center, $spacing-3);
    padding: $spacing-6;
    color: $gray-400;
    text-align: center;
  }

  &__view-all {
    @include button-reset;
    @include flex(row, flex-start, center, $spacing-1);
    font-size: $font-size-sm;
    font-weight: $font-weight-medium;
    color: $dash-primary-dark;
    transition: color $transition-fast;

    &:hover {
      color: color.adjust($dash-primary-dark, $lightness: -10%);
    }

    svg {
      transition: transform $transition-fast;
    }

    &:hover svg {
      transform: translateX(2px);
    }
  }
}

.upcoming-list {
  list-style: none;
  @include flex(column, flex-start, stretch, $spacing-4);

  &__item {
    @include flex(row, flex-start, center, $spacing-3);
    cursor: pointer;
    transition: all $transition-fast;

    &:hover {
      .upcoming-list__content {
        color: $gray-900;
      }
    }
  }

  &__indicator {
    width: 8px;
    height: 8px;
    border-radius: $radius-full;
    flex-shrink: 0;

    &--orange {
      background-color: $dash-orange;
    }

    &--blue {
      background-color: $dash-blue;
    }

    &--red {
      background-color: $dash-red;
    }

    &--green {
      background-color: $dash-primary;
    }

    &--purple {
      background-color: #9c27b0;
    }
  }

  &__content {
    flex: 1;
    min-width: 0;
  }

  &__title {
    display: block;
    font-size: $font-size-sm;
    font-weight: $font-weight-medium;
    color: $gray-900;
    margin-bottom: 2px;
  }

  &__desc {
    font-size: $font-size-xs;
    color: $gray-400;
  }

  &__icon {
    @include flex-center;
    width: 36px;
    height: 36px;
    background-color: $gray-50;
    border-radius: $radius-md;
    color: $gray-400;
    flex-shrink: 0;

    svg {
      width: 18px;
      height: 18px;
    }
  }

  &__time {
    @include flex(column, flex-start, flex-end);
    flex-shrink: 0;
    text-align: right;
  }

  &__date {
    font-size: $font-size-sm;
    font-weight: $font-weight-medium;
    color: $gray-900;
  }

  &__duration {
    font-size: $font-size-xs;
    color: $gray-400;
  }
}

// =============================================
// Exams Page
// =============================================

.exams-page {
  padding: $spacing-6;
  max-width: 1400px;
  margin: 0 auto;

  @include mobile {
    padding: $spacing-4;
  }

  &__header {
    @include flex(row, space-between, center);
    margin-bottom: $spacing-6;

    @include mobile {
      flex-direction: column;
      align-items: flex-start;
      gap: $spacing-4;
    }
  }

  &__title-section {
    @include flex(column, flex-start, flex-start, $spacing-1);
  }

  &__title {
    font-size: $font-size-2xl;
    font-weight: $font-weight-bold;
    color: $gray-900;
  }

  &__subtitle {
    font-size: $font-size-sm;
    color: $gray-500;
  }

  &__add-btn {
    @include button-reset;
    @include flex(row, center, center, $spacing-2);
    padding: $spacing-3 $spacing-5;
    background-color: $primary-blue;
    color: $white;
    border-radius: $radius-lg;
    font-size: $font-size-sm;
    font-weight: $font-weight-medium;
    transition: background-color 0.2s;

    &:hover {
      background-color: color.adjust($primary-blue, $lightness: -8%);
    }

    svg {
      width: 18px;
      height: 18px;
    }
  }

  &__tabs {
    @include flex(row, flex-start, center, $spacing-2);
    margin-bottom: $spacing-5;
    border-bottom: 1px solid $gray-200;
    padding-bottom: $spacing-3;
  }

  &__tab {
    @include button-reset;
    padding: $spacing-2 $spacing-4;
    font-size: $font-size-sm;
    font-weight: $font-weight-medium;
    color: $gray-500;
    border-radius: $radius-md;
    transition: all 0.2s;

    &:hover {
      color: $gray-700;
      background-color: $gray-100;
    }

    &--active {
      color: $primary-blue;
      background-color: rgba($primary-blue, 0.1);

      &:hover {
        color: $primary-blue;
        background-color: rgba($primary-blue, 0.15);
      }
    }
  }

  &__content {
    @include flex(row, flex-start, flex-start, $spacing-6);

    @include mobile {
      flex-direction: column;
    }
  }

  &__list {
    flex: 1;
    min-width: 0;
  }

  &__cards {
    @include flex(column, flex-start, stretch, $spacing-4);
  }

  &__detail {
    width: 400px;
    flex-shrink: 0;
    position: sticky;
    top: $spacing-6;
    max-height: calc(100vh - #{$spacing-6} * 2);
    overflow-y: auto;

    @include mobile {
      width: 100%;
      position: fixed;
      top: auto;
      bottom: 0;
      left: 0;
      right: 0;
      max-height: 70vh;
      border-radius: $radius-xl $radius-xl 0 0;
      box-shadow: 0 -4px 20px rgba($black, 0.15);
      z-index: 100;
    }
  }

  &__empty {
    @include flex(column, center, center, $spacing-4);
    padding: $spacing-12;
    text-align: center;
    background-color: $white;
    border-radius: $radius-xl;
    border: 2px dashed $gray-200;

    svg {
      color: $gray-300;
    }

    p {
      font-size: $font-size-base;
      color: $gray-500;
    }
  }

  &__empty-btn {
    @include button-reset;
    padding: $spacing-2 $spacing-4;
    background-color: $primary-blue;
    color: $white;
    border-radius: $radius-md;
    font-size: $font-size-sm;
    font-weight: $font-weight-medium;
    transition: background-color 0.2s;

    &:hover {
      background-color: color.adjust($primary-blue, $lightness: -8%);
    }
  }
}

// Exam Card Component
.exam-card {
  @include button-reset;
  @include flex(row, flex-start, stretch);
  width: 100%;
  background-color: $white;
  border-radius: $radius-xl;
  padding: $spacing-4;
  text-align: left;
  transition: all 0.2s;
  border: 2px solid transparent;
  box-shadow: 0 1px 3px rgba($black, 0.05);

  &:hover {
    box-shadow: 0 4px 12px rgba($black, 0.1);
    transform: translateY(-1px);
  }

  &--selected {
    border-color: $primary-blue;
    box-shadow: 0 4px 12px rgba($primary-blue, 0.15);
  }

  &--urgent {
    .exam-card__indicator {
      background-color: $error;
    }
    .exam-card__countdown {
      background-color: rgba($error, 0.1);
      color: $error;
    }
  }

  &--soon {
    .exam-card__indicator {
      background-color: $warning;
    }
    .exam-card__countdown {
      background-color: rgba($warning, 0.1);
      color: color.adjust($warning, $lightness: -15%);
    }
  }

  &--past {
    opacity: 0.7;
    .exam-card__indicator {
      background-color: $gray-300;
    }
    .exam-card__countdown {
      background-color: $gray-100;
      color: $gray-500;
    }
  }

  &__indicator {
    width: 4px;
    background-color: $error;
    border-radius: $radius-full;
    margin-right: $spacing-4;
    flex-shrink: 0;
  }

  &__content {
    flex: 1;
    min-width: 0;
  }

  &__header {
    @include flex(row, space-between, center);
    margin-bottom: $spacing-2;
  }

  &__icon {
    font-size: $font-size-lg;
  }

  &__countdown {
    font-size: $font-size-xs;
    font-weight: $font-weight-semibold;
    padding: $spacing-1 $spacing-2;
    border-radius: $radius-full;
    background-color: rgba($error, 0.1);
    color: $error;
  }

  &__title {
    font-size: $font-size-base;
    font-weight: $font-weight-semibold;
    color: $gray-900;
    margin-bottom: $spacing-2;
    @include text-clamp(1);
  }

  &__meta {
    @include flex(row, flex-start, center, $spacing-3);
    font-size: $font-size-sm;
    color: $gray-500;
    margin-bottom: $spacing-2;
  }

  &__date,
  &__time {
    @include flex(row, flex-start, center, $spacing-1);
  }

  &__location {
    font-size: $font-size-xs;
    color: $gray-400;
    @include text-clamp(1);
    margin-bottom: $spacing-2;
  }

  &__priority {
    display: inline-block;
    font-size: $font-size-xs;
    font-weight: $font-weight-medium;
    padding: $spacing-1 $spacing-2;
    background-color: rgba($warning, 0.1);
    color: color.adjust($warning, $lightness: -15%);
    border-radius: $radius-sm;
  }
}

// Exam Detail Panel
.exam-detail {
  background-color: $white;
  border-radius: $radius-xl;
  box-shadow: 0 4px 20px rgba($black, 0.1);
  overflow: hidden;

  &__header {
    @include flex(row, space-between, center);
    padding: $spacing-4;
    border-bottom: 1px solid $gray-100;
  }

  &__close {
    @include button-reset;
    width: 32px;
    height: 32px;
    @include flex-center;
    border-radius: $radius-md;
    color: $gray-500;

    &:hover {
      background-color: $gray-100;
      color: $gray-700;
    }
  }

  &__actions {
    @include flex(row, flex-end, center, $spacing-2);
  }

  &__action {
    @include button-reset;
    @include flex(row, center, center, $spacing-1);
    padding: $spacing-2 $spacing-3;
    font-size: $font-size-sm;
    color: $gray-600;
    border-radius: $radius-md;
    transition: all 0.2s;

    &:hover {
      background-color: $gray-100;
      color: $gray-800;
    }

    &--danger {
      color: $error;

      &:hover {
        background-color: rgba($error, 0.1);
        color: $error;
      }
    }
  }

  &__content {
    padding: $spacing-5;
  }

  &__category {
    @include flex(row, flex-start, center, $spacing-2);
    margin-bottom: $spacing-3;
  }

  &__category-icon {
    font-size: $font-size-xl;
  }

  &__category-label {
    font-size: $font-size-sm;
    font-weight: $font-weight-medium;
    color: $gray-500;
  }

  &__title {
    font-size: $font-size-xl;
    font-weight: $font-weight-bold;
    color: $gray-900;
    margin-bottom: $spacing-4;
  }

  &__countdown {
    display: inline-block;
    padding: $spacing-2 $spacing-4;
    font-size: $font-size-sm;
    font-weight: $font-weight-semibold;
    border-radius: $radius-lg;
    background-color: rgba($error, 0.1);
    color: $error;
    margin-bottom: $spacing-5;

    &--urgent {
      background-color: $error;
      color: $white;
    }

    &--soon {
      background-color: rgba($warning, 0.15);
      color: color.adjust($warning, $lightness: -15%);
    }

    &--past {
      background-color: $gray-100;
      color: $gray-500;
    }
  }

  &__info {
    @include flex(column, flex-start, stretch, $spacing-3);
    margin-bottom: $spacing-5;
  }

  &__info-row {
    @include flex(row, flex-start, center, $spacing-3);
    font-size: $font-size-sm;
    color: $gray-700;

    svg {
      color: $gray-400;
      flex-shrink: 0;
    }
  }

  &__section-title {
    font-size: $font-size-sm;
    font-weight: $font-weight-semibold;
    color: $gray-500;
    text-transform: uppercase;
    letter-spacing: 0.05em;
    margin-bottom: $spacing-3;
  }

  &__notes {
    margin-bottom: $spacing-5;
  }

  &__notes-content {
    font-size: $font-size-sm;
    color: $gray-700;
    line-height: $line-height-relaxed;
    padding: $spacing-4;
    background-color: $gray-50;
    border-radius: $radius-lg;

    p {
      margin-bottom: $spacing-2;

      &:last-child {
        margin-bottom: 0;
      }
    }

    ul, ol {
      margin-left: $spacing-4;
      margin-bottom: $spacing-2;
    }
  }

  &__files {
    margin-bottom: $spacing-5;
  }

  &__file-list {
    list-style: none;
  }

  &__file {
    @include flex(row, flex-start, center, $spacing-2);
    padding: $spacing-2 $spacing-3;
    background-color: $gray-50;
    border-radius: $radius-md;
    margin-bottom: $spacing-2;

    &:last-child {
      margin-bottom: 0;
    }

    svg {
      color: $gray-400;
      flex-shrink: 0;
    }
  }

  &__file-link {
    font-size: $font-size-sm;
    color: $primary-blue;
    text-decoration: none;
    @include text-clamp(1);

    &:hover {
      text-decoration: underline;
    }
  }

  &__topics {
    margin-top: $spacing-5;
  }
}

// =============================================
// Topic Components
// =============================================

// Topic List Container
.topic-list {
  &__header {
    margin-bottom: $spacing-4;
  }

  &__items {
    @include flex(column, flex-start, stretch, $spacing-2);
    margin-bottom: $spacing-4;
  }

  &__add {
    @include flex(row, flex-start, center, $spacing-2);
  }

  &__input {
    flex: 1;
    padding: $spacing-3;
    font-size: $font-size-sm;
    border: 1px solid $gray-200;
    border-radius: $radius-lg;
    background-color: $white;
    transition: border-color 0.2s, box-shadow 0.2s;

    &:focus {
      outline: none;
      border-color: $primary-blue;
      box-shadow: 0 0 0 3px rgba($primary-blue, 0.1);
    }

    &::placeholder {
      color: $gray-400;
    }
  }

  &__add-btn {
    @include button-reset;
    width: 40px;
    height: 40px;
    @include flex-center;
    background-color: $primary-blue;
    color: $white;
    border-radius: $radius-lg;
    transition: background-color 0.2s;

    &:hover:not(:disabled) {
      background-color: color.adjust($primary-blue, $lightness: -8%);
    }

    &:disabled {
      background-color: $gray-200;
      color: $gray-400;
      cursor: not-allowed;
    }

    svg {
      width: 18px;
      height: 18px;
    }
  }

  &__empty {
    text-align: center;
    padding: $spacing-4;
    font-size: $font-size-sm;
    color: $gray-400;
  }
}

// Individual Topic Item
.topic-item {
  @include flex(row, flex-start, center, $spacing-3);
  padding: $spacing-3;
  background-color: $gray-50;
  border-radius: $radius-lg;
  transition: background-color 0.2s;

  &:hover {
    background-color: $gray-100;
  }

  &--completed {
    .topic-item__name {
      text-decoration: line-through;
      color: $gray-400;
    }
  }

  &__checkbox {
    position: relative;
    cursor: pointer;

    input {
      position: absolute;
      opacity: 0;
      cursor: pointer;
    }
  }

  &__checkmark {
    width: 20px;
    height: 20px;
    @include flex-center;
    border: 2px solid $gray-300;
    border-radius: $radius-sm;
    background-color: $white;
    transition: all 0.2s;

    input:checked + & {
      background-color: $success;
      border-color: $success;
    }

    svg {
      width: 12px;
      height: 12px;
      color: $white;
    }
  }

  &__content {
    flex: 1;
    min-width: 0;
  }

  &__name {
    font-size: $font-size-sm;
    color: $gray-800;
    cursor: pointer;
    @include text-clamp(1);

    &:hover {
      color: $primary-blue;
    }
  }

  &__input {
    width: 100%;
    padding: $spacing-1 $spacing-2;
    font-size: $font-size-sm;
    border: 1px solid $primary-blue;
    border-radius: $radius-sm;
    background-color: $white;

    &:focus {
      outline: none;
      box-shadow: 0 0 0 2px rgba($primary-blue, 0.2);
    }
  }

  &__confidence {
    flex-shrink: 0;
  }

  &__delete {
    @include button-reset;
    width: 28px;
    height: 28px;
    @include flex-center;
    color: $gray-400;
    border-radius: $radius-sm;
    opacity: 0;
    transition: all 0.2s;

    .topic-item:hover & {
      opacity: 1;
    }

    &:hover {
      color: $error;
      background-color: rgba($error, 0.1);
    }

    svg {
      width: 14px;
      height: 14px;
    }
  }
}

// Confidence Rating (Stars)
.confidence-rating {
  @include flex(row, flex-start, center, $spacing-1);

  &--sm {
    .confidence-rating__star {
      width: 16px;
      height: 16px;

      svg {
        width: 14px;
        height: 14px;
      }
    }
  }

  &--md {
    .confidence-rating__star {
      width: 24px;
      height: 24px;

      svg {
        width: 20px;
        height: 20px;
      }
    }
  }

  &__star {
    @include button-reset;
    @include flex-center;
    color: $gray-300;
    transition: color 0.15s, transform 0.15s;

    &:hover:not(:disabled) {
      transform: scale(1.1);
    }

    &:disabled {
      cursor: default;
    }

    &--empty {
      color: $gray-300;
    }

    &--low {
      color: $error;
    }

    &--medium {
      color: $warning;
    }

    &--high {
      color: $success;
    }

    &--hover {
      transform: scale(1.15);
    }
  }
}

// Topic Progress
.topic-progress {
  @include flex(row, flex-start, center, $spacing-3);
  padding: $spacing-3;
  background-color: $white;
  border-radius: $radius-lg;
  border: 1px solid $gray-200;

  &__stats {
    @include flex(column, flex-start, flex-start, $spacing-1);
    min-width: 100px;
  }

  &__count {
    font-size: $font-size-sm;
    font-weight: $font-weight-semibold;
    color: $gray-800;
  }

  &__confidence {
    font-size: $font-size-xs;
    color: $gray-500;
  }

  &__bar-container {
    flex: 1;
    height: 8px;
    background-color: $gray-100;
    border-radius: $radius-full;
    overflow: hidden;
  }

  &__bar {
    height: 100%;
    border-radius: $radius-full;
    transition: width 0.3s ease;

    &--low {
      background-color: $error;
    }

    &--medium {
      background-color: $warning;
    }

    &--high {
      background-color: $success;
    }
  }

  &__percent {
    font-size: $font-size-sm;
    font-weight: $font-weight-semibold;
    color: $gray-600;
    min-width: 40px;
    text-align: right;
  }
}

// Animation for spinner
@keyframes spin {
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
}

.animate-spin {
  animation: spin 1s linear infinite;
}

// =============================================
// Study Session List
// =============================================

.study-session-list {
  &__stats {
    display: flex;
    gap: $spacing-6;
    padding: $spacing-4;
    background-color: $gray-50;
    border-radius: $radius-md;
    margin-bottom: $spacing-4;
  }

  &__stat {
    display: flex;
    flex-direction: column;
    align-items: center;
    flex: 1;
  }

  &__stat-value {
    font-size: $font-size-lg;
    font-weight: $font-weight-bold;
    color: $gray-900;
  }

  &__stat-label {
    font-size: $font-size-xs;
    color: $gray-500;
    text-transform: uppercase;
    letter-spacing: 0.5px;
  }

  &__items {
    display: flex;
    flex-direction: column;
    gap: $spacing-1;
    margin-bottom: $spacing-4;
  }

  &__empty {
    text-align: center;
    padding: $spacing-6;
    color: $gray-500;
    font-size: $font-size-sm;
  }

  &__item {
    background-color: $white;
    border: 1px solid $gray-200;
    border-radius: $radius-md;
    overflow: hidden;
    transition: border-color 0.2s;

    &:hover {
      border-color: $gray-300;
    }

    &--expanded {
      border-color: $primary-blue;
    }
  }

  &__item-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: $spacing-2 $spacing-4;
    cursor: pointer;

    &:hover {
      background-color: $gray-50;
    }
  }

  &__item-info {
    display: flex;
    flex-direction: column;
    gap: 2px;
  }

  &__item-title {
    font-size: $font-size-sm;
    font-weight: $font-weight-medium;
    color: $gray-900;
  }

  &__item-date {
    font-size: $font-size-xs;
    color: $gray-500;
  }

  &__item-meta {
    display: flex;
    align-items: center;
    gap: $spacing-2;
  }

  &__item-duration {
    font-size: $font-size-xs;
    font-weight: $font-weight-medium;
    color: $primary-blue;
    background-color: rgba($primary-blue, 0.1);
    padding: 2px $spacing-1;
    border-radius: $radius-sm;
  }

  &__item-details {
    padding: $spacing-2 $spacing-4 $spacing-4;
    border-top: 1px solid $gray-100;
    background-color: $gray-50;
  }

  &__item-time {
    display: flex;
    align-items: center;
    gap: $spacing-1;
    font-size: $font-size-sm;
    color: $gray-600;
    margin-bottom: $spacing-2;

    svg {
      color: $gray-400;
    }
  }

  &__item-notes {
    font-size: $font-size-sm;
    color: $gray-700;
    margin-bottom: $spacing-2;
    padding: $spacing-2;
    background-color: $white;
    border-radius: $radius-sm;
  }

  &__unlink-btn {
    display: flex;
    align-items: center;
    gap: $spacing-1;
    padding: $spacing-1 $spacing-2;
    font-size: $font-size-xs;
    color: $gray-500;
    background: none;
    border: 1px solid $gray-300;
    border-radius: $radius-sm;
    cursor: pointer;
    transition: all 0.2s;

    &:hover {
      color: $error;
      border-color: $error;
      background-color: rgba($error, 0.05);
    }
  }

  &__start-btn {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: $spacing-1;
    width: 100%;
    padding: $spacing-2 $spacing-4;
    font-size: $font-size-sm;
    font-weight: $font-weight-medium;
    color: $white;
    background-color: $primary-blue;
    border: none;
    border-radius: $radius-md;
    cursor: pointer;
    transition: background-color 0.2s;

    &:hover {
      background-color: color.adjust($primary-blue, $lightness: -8%);
    }
  }
}

// =============================================
// Study Session Form (inside modal)
// =============================================

.study-session-form {
  &__group {
    margin-bottom: $spacing-4;
  }

  &__label {
    display: block;
    font-size: $font-size-sm;
    font-weight: $font-weight-medium;
    color: $gray-700;
    margin-bottom: $spacing-2;
  }

  &__input {
    width: 100%;
    padding: $spacing-2 $spacing-3;
    font-size: $font-size-sm;
    color: $gray-900;
    background-color: $white;
    border: 1px solid $gray-300;
    border-radius: $radius-md;
    transition: border-color 0.2s, box-shadow 0.2s;

    &:focus {
      outline: none;
      border-color: $primary-blue;
      box-shadow: 0 0 0 3px rgba($primary-blue, 0.1);
    }

    &::placeholder {
      color: $gray-400;
    }
  }

  &__duration-options {
    display: flex;
    gap: $spacing-2;
    flex-wrap: wrap;
  }

  &__duration-btn {
    padding: $spacing-2 $spacing-3;
    font-size: $font-size-sm;
    font-weight: $font-weight-medium;
    color: $gray-600;
    background-color: $gray-100;
    border: 1px solid $gray-200;
    border-radius: $radius-md;
    cursor: pointer;
    transition: all 0.2s;

    &:hover {
      background-color: $gray-200;
      border-color: $gray-300;
    }

    &--active {
      color: $primary-blue;
      background-color: rgba($primary-blue, 0.1);
      border-color: $primary-blue;
    }
  }

  &__info {
    display: flex;
    align-items: flex-start;
    gap: $spacing-2;
    padding: $spacing-3;
    background-color: $info-light;
    border-radius: $radius-md;
    font-size: $font-size-sm;
    color: $gray-600;
    margin-bottom: $spacing-4;

    svg {
      flex-shrink: 0;
      margin-top: 2px;
      color: $info;
    }
  }

  &__actions {
    display: flex;
    justify-content: flex-end;
    gap: $spacing-3;
    padding-top: $spacing-4;
    border-top: 1px solid $gray-200;
  }

  &__btn {
    padding: $spacing-2 $spacing-4;
    font-size: $font-size-sm;
    font-weight: $font-weight-medium;
    border-radius: $radius-md;
    cursor: pointer;
    transition: all 0.2s;

    &--secondary {
      color: $gray-700;
      background-color: $white;
      border: 1px solid $gray-300;

      &:hover {
        background-color: $gray-50;
        border-color: $gray-400;
      }
    }

    &--primary {
      color: $white;
      background-color: $primary-blue;
      border: 1px solid $primary-blue;

      &:hover:not(:disabled) {
        background-color: color.adjust($primary-blue, $lightness: -8%);
      }

      &:disabled {
        opacity: 0.6;
        cursor: not-allowed;
      }
    }
  }
}

// Exam detail sessions section
.exam-detail__sessions {
  margin-top: $spacing-6;
  padding-top: $spacing-6;
  border-top: 1px solid $gray-200;
}

// =============================================
// Analytics Page
// =============================================

.analytics-page {
  padding: $spacing-6;
  max-width: 1200px;
  margin: 0 auto;

  &__header {
    margin-bottom: $spacing-6;
  }

  &__title {
    font-size: $font-size-2xl;
    font-weight: $font-weight-bold;
    color: $gray-900;
    margin-bottom: $spacing-1;
  }

  &__subtitle {
    font-size: $font-size-sm;
    color: $gray-500;
  }

  &__loading {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    gap: $spacing-3;
    padding: $spacing-12;
    color: $gray-500;
  }

  &__stats-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
    gap: $spacing-4;
    margin-bottom: $spacing-6;
  }

  &__row {
    display: grid;
    grid-template-columns: 280px 1fr;
    gap: $spacing-6;
    margin-bottom: $spacing-6;

    @media (max-width: $breakpoint-md) {
      grid-template-columns: 1fr;
    }
  }

  &__streak-section {
    display: flex;
    align-items: stretch;
  }

  &__activity-section {
    min-width: 0;
  }

  &__exam-section {
    background-color: $white;
    border-radius: $radius-lg;
    padding: $spacing-5;
    box-shadow: $shadow-sm;
  }
}

// =============================================
// Stats Card
// =============================================

.stats-card {
  display: flex;
  align-items: flex-start;
  gap: $spacing-4;
  padding: $spacing-5;
  background-color: $white;
  border-radius: $radius-lg;
  box-shadow: $shadow-sm;

  &__icon {
    display: flex;
    align-items: center;
    justify-content: center;
    width: 48px;
    height: 48px;
    border-radius: $radius-md;
    background-color: $gray-100;
    color: $gray-600;
    flex-shrink: 0;
  }

  &--primary &__icon {
    background-color: rgba($primary-blue, 0.1);
    color: $primary-blue;
  }

  &--success &__icon {
    background-color: $success-light;
    color: $success;
  }

  &--warning &__icon {
    background-color: $warning-light;
    color: $warning;
  }

  &__content {
    display: flex;
    flex-direction: column;
  }

  &__value {
    font-size: $font-size-xl;
    font-weight: $font-weight-bold;
    color: $gray-900;
    line-height: 1.2;
  }

  &__label {
    font-size: $font-size-sm;
    color: $gray-500;
    margin-top: $spacing-1;
  }

  &__subtext {
    font-size: $font-size-xs;
    color: $gray-400;
    margin-top: $spacing-1;
  }
}

// =============================================
// Activity Chart
// =============================================

.activity-chart {
  background-color: $white;
  border-radius: $radius-lg;
  padding: $spacing-5;
  box-shadow: $shadow-sm;
  height: 100%;

  &__header {
    display: flex;
    justify-content: space-between;
    align-items: baseline;
    margin-bottom: $spacing-4;
  }

  &__title {
    font-size: $font-size-base;
    font-weight: $font-weight-semibold;
    color: $gray-900;
  }

  &__subtitle {
    font-size: $font-size-xs;
    color: $gray-500;
  }

  &__bars {
    display: flex;
    align-items: flex-end;
    gap: $spacing-1;
    height: 120px;
    padding-bottom: $spacing-6;
  }

  &__bar-container {
    flex: 1;
    display: flex;
    flex-direction: column;
    align-items: center;
    height: 100%;
  }

  &__bar-wrapper {
    flex: 1;
    width: 100%;
    display: flex;
    flex-direction: column;
    justify-content: flex-end;
  }

  &__bar {
    width: 100%;
    background-color: $gray-200;
    border-radius: $radius-sm $radius-sm 0 0;
    transition: height 0.3s ease, background-color 0.2s;
    min-height: 4px;

    &--filled {
      background-color: $primary-blue;
    }

    &--today {
      background-color: color.adjust($primary-blue, $lightness: -10%);
    }
  }

  &__label {
    font-size: $font-size-xs;
    color: $gray-400;
    margin-top: $spacing-2;

    &--today {
      color: $primary-blue;
      font-weight: $font-weight-semibold;
    }
  }

  &__legend {
    display: flex;
    gap: $spacing-4;
    margin-top: $spacing-3;
    padding-top: $spacing-3;
    border-top: 1px solid $gray-100;
  }

  &__legend-item {
    display: flex;
    align-items: center;
    gap: $spacing-2;
    font-size: $font-size-xs;
    color: $gray-500;
  }

  &__legend-dot {
    width: 8px;
    height: 8px;
    border-radius: 50%;
    background-color: $primary-blue;
  }
}

// =============================================
// Streak Display
// =============================================

.streak-display {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  padding: $spacing-6;
  background-color: $white;
  border-radius: $radius-lg;
  box-shadow: $shadow-sm;
  text-align: center;
  width: 100%;

  &__flame {
    margin-bottom: $spacing-3;
    color: $gray-300;
  }

  &--active &__flame {
    color: #FF6B35;
  }

  &__flame-icon--active {
    filter: drop-shadow(0 0 8px rgba(255, 107, 53, 0.5));
  }

  &__content {
    display: flex;
    flex-direction: column;
    align-items: center;
  }

  &__current {
    display: flex;
    align-items: baseline;
    gap: $spacing-2;
  }

  &__number {
    font-size: $font-size-3xl;
    font-weight: $font-weight-bold;
    color: $gray-900;
  }

  &__label {
    font-size: $font-size-sm;
    color: $gray-500;
  }

  &__best {
    font-size: $font-size-xs;
    color: $gray-400;
    margin-top: $spacing-2;
  }

  &__motivate {
    font-size: $font-size-xs;
    color: $warning;
    margin-top: $spacing-3;
    padding: $spacing-2 $spacing-3;
    background-color: $warning-light;
    border-radius: $radius-sm;
  }
}

// =============================================
// Exam Progress
// =============================================

.exam-progress {
  &__title {
    font-size: $font-size-base;
    font-weight: $font-weight-semibold;
    color: $gray-900;
    margin-bottom: $spacing-4;
  }

  &__empty {
    text-align: center;
    padding: $spacing-6;
    color: $gray-500;
    font-size: $font-size-sm;
  }

  &__list {
    display: flex;
    flex-direction: column;
    gap: $spacing-4;
  }

  &__item {
    padding: $spacing-4;
    background-color: $gray-50;
    border-radius: $radius-md;
    border: 1px solid $gray-200;
  }

  &__item-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: $spacing-3;
  }

  &__item-title {
    font-size: $font-size-sm;
    font-weight: $font-weight-semibold;
    color: $gray-900;
  }

  &__item-countdown {
    font-size: $font-size-xs;
    font-weight: $font-weight-medium;
    color: $gray-500;
    padding: $spacing-1 $spacing-2;
    background-color: $gray-200;
    border-radius: $radius-sm;

    &--soon {
      color: $warning;
      background-color: $warning-light;
    }

    &--urgent {
      color: $error;
      background-color: $error-light;
    }
  }

  &__item-stats {
    display: flex;
    flex-wrap: wrap;
    gap: $spacing-4;
    margin-bottom: $spacing-3;
  }

  &__item-stat {
    display: flex;
    align-items: center;
    gap: $spacing-1;
    font-size: $font-size-xs;
    color: $gray-600;

    svg {
      color: $gray-400;
    }
  }

  &__item-bars {
    display: flex;
    flex-direction: column;
    gap: $spacing-2;
  }

  &__bar {
    display: flex;
    align-items: center;
    gap: $spacing-2;
  }

  &__bar-label {
    font-size: $font-size-xs;
    color: $gray-500;
    width: 70px;
    flex-shrink: 0;
  }

  &__bar-track {
    flex: 1;
    height: 6px;
    background-color: $gray-200;
    border-radius: $radius-full;
    overflow: hidden;
  }

  &__bar-fill {
    height: 100%;
    border-radius: $radius-full;
    transition: width 0.3s ease;

    &--study {
      background-color: $primary-blue;
    }

    &--topics {
      background-color: $success;
    }
  }

  &__bar-percent {
    font-size: $font-size-xs;
    color: $gray-500;
    width: 36px;
    text-align: right;
  }
}

// =============================================
// Timer Page
// =============================================

.timer-page {
  display: flex;
  justify-content: center;
  align-items: flex-start;
  padding: $spacing-6;
  min-height: calc(100vh - $header-height);

  &__container {
    display: flex;
    flex-direction: column;
    gap: $spacing-6;
    width: 100%;
    max-width: 400px;
  }

  &__tips {
    background-color: $white;
    border-radius: $radius-lg;
    padding: $spacing-5;
    box-shadow: $shadow-sm;
  }

  &__tips-title {
    font-size: $font-size-sm;
    font-weight: $font-weight-semibold;
    color: $gray-700;
    margin-bottom: $spacing-3;
  }

  &__tips-list {
    list-style: none;
    display: flex;
    flex-direction: column;
    gap: $spacing-2;

    li {
      font-size: $font-size-sm;
      color: $gray-600;
      padding-left: $spacing-4;
      position: relative;

      &::before {
        content: '';
        position: absolute;
        left: 0;
        color: $primary-blue;
      }
    }
  }
}

// =============================================
// Study Timer Component
// =============================================

.study-timer {
  background-color: $white;
  border-radius: $radius-lg;
  padding: $spacing-6;
  box-shadow: $shadow-sm;
  text-align: center;

  &--break {
    background: linear-gradient(135deg, #E8F5E9 0%, #C8E6C9 100%);

    .study-timer__progress-bar {
      stroke: $success;
    }

    .study-timer__btn--primary {
      background-color: $success;
      border-color: $success;

      &:hover {
        background-color: color.adjust($success, $lightness: -8%);
      }
    }
  }

  &__header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: $spacing-4;
  }

  &__title {
    font-size: $font-size-lg;
    font-weight: $font-weight-semibold;
    color: $gray-900;
  }

  &__settings-btn {
    width: 36px;
    height: 36px;
    display: flex;
    align-items: center;
    justify-content: center;
    background: none;
    border: 1px solid $gray-200;
    border-radius: $radius-md;
    color: $gray-500;
    cursor: pointer;
    transition: all 0.2s;

    &:hover:not(:disabled) {
      background-color: $gray-50;
      color: $gray-700;
    }

    &:disabled {
      opacity: 0.5;
      cursor: not-allowed;
    }
  }

  &__settings {
    background-color: $gray-50;
    border-radius: $radius-md;
    padding: $spacing-4;
    margin-bottom: $spacing-4;
  }

  &__setting-group {
    margin-bottom: $spacing-3;

    &:last-child {
      margin-bottom: 0;
    }
  }

  &__setting-label {
    display: block;
    font-size: $font-size-xs;
    font-weight: $font-weight-medium;
    color: $gray-600;
    margin-bottom: $spacing-2;
    text-align: left;
  }

  &__presets {
    display: flex;
    gap: $spacing-2;
  }

  &__preset {
    flex: 1;
    padding: $spacing-2;
    font-size: $font-size-sm;
    font-weight: $font-weight-medium;
    color: $gray-600;
    background-color: $white;
    border: 1px solid $gray-200;
    border-radius: $radius-sm;
    cursor: pointer;
    transition: all 0.2s;

    &:hover {
      border-color: $gray-300;
    }

    &--active {
      color: $primary-blue;
      background-color: rgba($primary-blue, 0.1);
      border-color: $primary-blue;
    }
  }

  &__exam-select {
    margin-bottom: $spacing-4;
    text-align: left;
  }

  &__exam-label {
    display: block;
    font-size: $font-size-xs;
    font-weight: $font-weight-medium;
    color: $gray-600;
    margin-bottom: $spacing-2;
  }

  &__exam-dropdown {
    width: 100%;
    padding: $spacing-2 $spacing-3;
    font-size: $font-size-sm;
    color: $gray-900;
    background-color: $white;
    border: 1px solid $gray-300;
    border-radius: $radius-md;
    cursor: pointer;

    &:focus {
      outline: none;
      border-color: $primary-blue;
      box-shadow: 0 0 0 3px rgba($primary-blue, 0.1);
    }
  }

  &__display {
    position: relative;
    width: 200px;
    height: 200px;
    margin: 0 auto $spacing-4;
  }

  &__progress-ring {
    width: 100%;
    height: 100%;
    transform: scaleX(-1);
  }

  &__progress-bg {
    stroke: $gray-200;
  }

  &__progress-bar {
    stroke: $primary-blue;
    transition: stroke-dashoffset 0.5s ease;
  }

  &__time {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -60%);
    font-size: 3rem;
    font-weight: $font-weight-bold;
    color: $gray-900;
    font-variant-numeric: tabular-nums;
  }

  &__status {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, 80%);
    font-size: $font-size-sm;
    color: $gray-500;
  }

  &__sessions {
    display: flex;
    align-items: baseline;
    justify-content: center;
    gap: $spacing-2;
    margin-bottom: $spacing-5;
  }

  &__sessions-count {
    font-size: $font-size-xl;
    font-weight: $font-weight-bold;
    color: $primary-blue;
  }

  &__sessions-label {
    font-size: $font-size-sm;
    color: $gray-500;
  }

  &__controls {
    display: flex;
    gap: $spacing-3;
    justify-content: center;
  }

  &__btn {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: $spacing-2;
    padding: $spacing-3 $spacing-5;
    font-size: $font-size-sm;
    font-weight: $font-weight-semibold;
    border-radius: $radius-md;
    cursor: pointer;
    transition: all 0.2s;

    &--primary {
      color: $white;
      background-color: $primary-blue;
      border: 1px solid $primary-blue;

      &:hover {
        background-color: color.adjust($primary-blue, $lightness: -8%);
      }
    }

    &--secondary {
      color: $gray-700;
      background-color: $white;
      border: 1px solid $gray-300;

      &:hover {
        background-color: $gray-50;
      }
    }

    &--danger {
      color: $error;
      background-color: $white;
      border: 1px solid $error;

      &:hover {
        background-color: $error-light;
      }
    }

    &--break {
      color: $white;
      background-color: $success;
      border: 1px solid $success;

      &:hover {
        background-color: color.adjust($success, $lightness: -8%);
      }
    }
  }

  &__linked-exam {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: $spacing-2;
    margin-top: $spacing-4;
    padding: $spacing-2 $spacing-3;
    font-size: $font-size-xs;
    color: $gray-600;
    background-color: $gray-50;
    border-radius: $radius-sm;

    svg {
      color: $gray-400;
    }
  }
}

// ============================================
// NOTES PAGE
// ============================================

.notes-page {
  display: grid;
  grid-template-columns: 360px 1fr;
  height: 100%;
  background-color: $gray-50;

  &__sidebar {
    display: flex;
    flex-direction: column;
    height: 100%;
    background-color: $white;
    border-right: 1px solid $gray-200;
    overflow: hidden;
  }

  &__sidebar-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: $spacing-4 $spacing-4 $spacing-3;
    border-bottom: 1px solid $gray-100;
  }

  &__title {
    font-size: $font-size-xl;
    font-weight: $font-weight-semibold;
    color: $gray-900;
  }

  &__add-btn {
    @include button-reset;
    display: flex;
    align-items: center;
    justify-content: center;
    width: 36px;
    height: 36px;
    background-color: $primary-blue;
    color: $white;
    border-radius: $radius-md;
    transition: all $transition-fast;

    &:hover {
      background-color: color.adjust($primary-blue, $lightness: -8%);
    }
  }

  &__list {
    flex: 1;
    overflow-y: auto;
    padding: $spacing-2;
  }

  &__empty {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    height: 100%;
    padding: $spacing-6;
    text-align: center;
    color: $gray-500;

    svg {
      margin-bottom: $spacing-3;
      color: $gray-300;
    }

    p {
      margin-bottom: $spacing-3;
      font-size: $font-size-sm;
    }

    button {
      @include button-reset;
      padding: $spacing-2 $spacing-4;
      font-size: $font-size-sm;
      font-weight: $font-weight-medium;
      color: $primary-blue;
      background-color: rgba($primary-blue, 0.1);
      border-radius: $radius-md;

      &:hover {
        background-color: rgba($primary-blue, 0.15);
      }
    }
  }

  &__content {
    display: flex;
    flex-direction: column;
    height: 100%;
    overflow-y: auto;
    padding: $spacing-4;
  }

  &__placeholder {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    height: 100%;
    color: $gray-400;

    svg {
      margin-bottom: $spacing-4;
    }

    p {
      font-size: $font-size-sm;
    }
  }
}

// Note Search Component
.note-search {
  padding: $spacing-3 $spacing-4;
  border-bottom: 1px solid $gray-100;

  &__input-wrapper {
    position: relative;
    display: flex;
    align-items: center;

    svg {
      position: absolute;
      left: $spacing-3;
      color: $gray-400;
    }
  }

  &__input {
    width: 100%;
    padding: $spacing-2 $spacing-3 $spacing-2 $spacing-8;
    font-size: $font-size-sm;
    border: 1px solid $gray-200;
    border-radius: $radius-md;
    background-color: $gray-50;
    transition: all $transition-fast;

    &:focus {
      outline: none;
      border-color: $primary-blue;
      background-color: $white;
    }

    &::placeholder {
      color: $gray-400;
    }
  }

  &__clear {
    @include button-reset;
    position: absolute;
    right: $spacing-2;
    display: flex;
    align-items: center;
    justify-content: center;
    width: 20px;
    height: 20px;
    color: $gray-400;
    border-radius: 50%;

    &:hover {
      background-color: $gray-200;
      color: $gray-600;
    }
  }

  &__filters {
    display: flex;
    flex-wrap: wrap;
    gap: $spacing-2;
    margin-top: $spacing-3;
  }

  &__filter {
    @include button-reset;
    padding: $spacing-1 $spacing-2;
    font-size: $font-size-xs;
    font-weight: $font-weight-medium;
    color: $gray-600;
    background-color: $gray-100;
    border-radius: $radius-full;
    transition: all $transition-fast;

    &:hover {
      background-color: $gray-200;
    }

    &--active {
      color: $white;
      background-color: $primary-blue;
    }
  }
}

// Note Card Component
.note-card {
  position: relative;
  padding: $spacing-3;
  margin-bottom: $spacing-2;
  background-color: $white;
  border: 1px solid $gray-200;
  border-radius: $radius-lg;
  cursor: pointer;
  transition: all $transition-fast;

  &:hover {
    border-color: $gray-300;
    box-shadow: $shadow-sm;
  }

  &--selected {
    border-color: $primary-blue;
    background-color: rgba($primary-blue, 0.02);
  }

  &--pinned {
    border-left: 3px solid $warning;
  }

  &__pin {
    position: absolute;
    top: $spacing-2;
    right: $spacing-2;
    color: $warning;
  }

  &__color-accent {
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    height: 3px;
    border-radius: $radius-lg $radius-lg 0 0;
  }

  &__title {
    margin: 0 0 $spacing-2;
    font-size: $font-size-sm;
    font-weight: $font-weight-semibold;
    color: $gray-900;
    line-height: 1.4;
  }

  &__preview {
    margin: 0 0 $spacing-2;
    font-size: $font-size-xs;
    color: $gray-500;
    line-height: 1.5;
    display: -webkit-box;
    -webkit-line-clamp: 2;
    -webkit-box-orient: vertical;
    overflow: hidden;
  }

  &__meta {
    display: flex;
    align-items: center;
    justify-content: space-between;
    gap: $spacing-2;
  }

  &__date {
    font-size: $font-size-xs;
    color: $gray-400;
  }

  &__pin-btn {
    @include button-reset;
    position: absolute;
    top: $spacing-2;
    right: $spacing-2;
    display: flex;
    align-items: center;
    justify-content: center;
    width: 24px;
    height: 24px;
    color: $gray-400;
    border-radius: $radius-sm;
    opacity: 0;
    transition: all $transition-fast;

    &:hover {
      background-color: $gray-100;
      color: $warning;
    }
  }

  &:hover &__pin-btn {
    opacity: 1;
  }

  &--pinned &__pin-btn {
    opacity: 1;
    color: $warning;
  }
}

// Subject Badge Component
.subject-badge {
  display: inline-flex;
  padding: $spacing-1 $spacing-2;
  font-size: $font-size-xs;
  font-weight: $font-weight-medium;
  border-radius: $radius-full;
  cursor: default;

  &--anatomy { background-color: #fef2f2; color: #dc2626; }
  &--physiology { background-color: #fef3c7; color: #d97706; }
  &--biology { background-color: #d1fae5; color: #059669; }
  &--chemistry { background-color: #dbeafe; color: #2563eb; }
  &--psychology { background-color: #ede9fe; color: #7c3aed; }
  &--math { background-color: #fce7f3; color: #db2777; }
  &--english { background-color: #e0f2fe; color: #0284c7; }
  &--history { background-color: #fef9c3; color: #ca8a04; }
}

// Note Editor Component
.note-editor {
  display: flex;
  flex-direction: column;
  height: 100%;
  background-color: $white;
  border-radius: $radius-xl;
  box-shadow: $shadow-md;
  overflow: hidden;

  &__header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: $spacing-4;
    border-bottom: 1px solid $gray-200;
  }

  &__heading {
    font-size: $font-size-lg;
    font-weight: $font-weight-semibold;
    color: $gray-900;
  }

  &__actions {
    display: flex;
    gap: $spacing-2;
  }

  &__btn {
    @include button-reset;
    padding: $spacing-2 $spacing-4;
    font-size: $font-size-sm;
    font-weight: $font-weight-medium;
    border-radius: $radius-md;
    transition: all $transition-fast;

    &--cancel {
      color: $gray-600;
      background-color: $gray-100;

      &:hover {
        background-color: $gray-200;
      }
    }

    &--save {
      color: $white;
      background-color: $primary-blue;

      &:hover:not(:disabled) {
        background-color: color.adjust($primary-blue, $lightness: -8%);
      }

      &:disabled {
        opacity: 0.5;
        cursor: not-allowed;
      }
    }
  }

  &__body {
    display: grid;
    grid-template-columns: 1fr 280px;
    flex: 1;
    overflow: hidden;
  }

  &__main {
    display: flex;
    flex-direction: column;
    padding: $spacing-4;
    overflow-y: auto;
  }

  &__title-input {
    width: 100%;
    padding: $spacing-3 0;
    margin-bottom: $spacing-4;
    font-size: $font-size-2xl;
    font-weight: $font-weight-semibold;
    color: $gray-900;
    border: none;
    border-bottom: 2px solid $gray-200;
    outline: none;
    transition: border-color $transition-fast;

    &:focus {
      border-color: $primary-blue;
    }

    &::placeholder {
      color: $gray-400;
    }
  }

  &__sidebar {
    display: flex;
    flex-direction: column;
    gap: $spacing-4;
    padding: $spacing-4;
    background-color: $gray-50;
    border-left: 1px solid $gray-200;
    overflow-y: auto;
  }

  &__field {
    display: flex;
    flex-direction: column;
    gap: $spacing-2;
  }

  &__label {
    font-size: $font-size-xs;
    font-weight: $font-weight-medium;
    color: $gray-500;
    text-transform: uppercase;
    letter-spacing: 0.05em;
  }

  &__input {
    padding: $spacing-2 $spacing-3;
    font-size: $font-size-sm;
    border: 1px solid $gray-200;
    border-radius: $radius-md;
    background-color: $white;

    &:focus {
      outline: none;
      border-color: $primary-blue;
    }
  }

  &__select {
    padding: $spacing-2 $spacing-3;
    font-size: $font-size-sm;
    border: 1px solid $gray-200;
    border-radius: $radius-md;
    background-color: $white;
    cursor: pointer;

    &:focus {
      outline: none;
      border-color: $primary-blue;
    }
  }

  &__tags {
    display: flex;
    flex-wrap: wrap;
    gap: $spacing-1;
    padding: $spacing-2;
    min-height: 40px;
    background-color: $white;
    border: 1px solid $gray-200;
    border-radius: $radius-md;
  }

  &__tag {
    display: inline-flex;
    align-items: center;
    gap: $spacing-1;
    padding: $spacing-1 $spacing-2;
    font-size: $font-size-xs;
    color: $primary-blue;
    background-color: rgba($primary-blue, 0.1);
    border-radius: $radius-full;
  }

  &__tag-remove {
    @include button-reset;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: $font-size-sm;
    color: $gray-500;
    line-height: 1;

    &:hover {
      color: $error;
    }
  }

  &__tag-input {
    flex: 1;
    min-width: 80px;
    padding: $spacing-1;
    font-size: $font-size-xs;
    border: none;
    outline: none;
    background: transparent;

    &::placeholder {
      color: $gray-400;
    }
  }

  &__colors {
    display: flex;
    flex-wrap: wrap;
    gap: $spacing-2;
  }

  &__color {
    @include button-reset;
    width: 28px;
    height: 28px;
    border-radius: 50%;
    border: 2px solid transparent;
    transition: all $transition-fast;

    &:hover {
      transform: scale(1.1);
    }

    &--selected {
      border-color: $gray-800;
      box-shadow: 0 0 0 2px $white, 0 0 0 4px $gray-400;
    }
  }
}

// Note Detail Component
.note-detail {
  display: flex;
  flex-direction: column;
  height: 100%;
  background-color: $white;
  border-radius: $radius-xl;
  box-shadow: $shadow-md;
  overflow: hidden;

  &__header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: $spacing-3 $spacing-4;
    border-bottom: 1px solid $gray-200;
  }

  &__back {
    @include button-reset;
    display: flex;
    align-items: center;
    gap: $spacing-1;
    padding: $spacing-2;
    font-size: $font-size-sm;
    color: $gray-600;
    border-radius: $radius-md;

    &:hover {
      background-color: $gray-100;
    }
  }

  &__actions {
    display: flex;
    gap: $spacing-1;
  }

  &__action {
    @include button-reset;
    display: flex;
    align-items: center;
    justify-content: center;
    width: 36px;
    height: 36px;
    color: $gray-500;
    border-radius: $radius-md;
    transition: all $transition-fast;

    &:hover {
      background-color: $gray-100;
      color: $gray-700;
    }

    &--active {
      color: $warning;
    }

    &--danger:hover {
      background-color: $error-light;
      color: $error;
    }
  }

  &__body {
    flex: 1;
    padding: $spacing-6;
    overflow-y: auto;
  }

  &__color-bar {
    width: 100%;
    height: 4px;
    margin-bottom: $spacing-4;
    border-radius: $radius-full;
  }

  &__title {
    margin: 0 0 $spacing-4;
    font-size: $font-size-2xl;
    font-weight: $font-weight-bold;
    color: $gray-900;
    line-height: 1.3;
  }

  &__meta {
    display: flex;
    align-items: center;
    gap: $spacing-3;
    margin-bottom: $spacing-4;
  }

  &__date {
    font-size: $font-size-xs;
    color: $gray-500;
  }

  &__tags {
    display: flex;
    flex-wrap: wrap;
    gap: $spacing-2;
    margin-bottom: $spacing-6;
  }

  &__tag {
    padding: $spacing-1 $spacing-2;
    font-size: $font-size-xs;
    color: $gray-600;
    background-color: $gray-100;
    border-radius: $radius-full;
  }

  &__content {
    font-size: $font-size-base;
    line-height: 1.7;
    color: $gray-700;

    h2 {
      margin: $spacing-6 0 $spacing-3;
      font-size: $font-size-xl;
      font-weight: $font-weight-semibold;
      color: $gray-900;
    }

    h3 {
      margin: $spacing-4 0 $spacing-2;
      font-size: $font-size-lg;
      font-weight: $font-weight-semibold;
      color: $gray-900;
    }

    p {
      margin-bottom: $spacing-4;
    }

    ul, ol {
      margin: 0 0 $spacing-4;
      padding-left: $spacing-6;
    }

    li {
      margin-bottom: $spacing-1;
    }

    a {
      color: $primary-blue;
      text-decoration: underline;

      &:hover {
        text-decoration: none;
      }
    }

    strong {
      font-weight: $font-weight-semibold;
    }
  }
}

// Mobile responsive
@media (max-width: 768px) {
  .notes-page {
    grid-template-columns: 1fr;

    &__sidebar {
      display: none;

      &--open {
        display: flex;
        position: fixed;
        top: 0;
        left: 0;
        bottom: 0;
        width: 100%;
        z-index: 50;
      }
    }

    &__content {
      padding: $spacing-3;
    }
  }

  .note-editor__body {
    grid-template-columns: 1fr;
  }

  .note-editor__sidebar {
    display: none;
  }
}

// =====================================================
// TIMETABLE PAGE STYLES
// =====================================================

.timetable-page {
  display: flex;
  flex-direction: column;
  height: 100%;
  padding: $spacing-4;
  gap: $spacing-4;
  overflow: hidden;

  &__header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    flex-shrink: 0;
  }

  &__title {
    font-size: $font-size-2xl;
    font-weight: $font-weight-bold;
    color: $gray-900;
  }

  &__add-btn {
    display: inline-flex;
    align-items: center;
    gap: $spacing-2;
    padding: $spacing-2 $spacing-4;
    background: $primary-blue;
    color: $white;
    border: none;
    border-radius: $radius-md;
    font-size: $font-size-sm;
    font-weight: $font-weight-medium;
    cursor: pointer;
    transition: background-color $transition-fast;

    &:hover {
      background: $primary-blue-dark;
    }
  }

  &__content {
    display: grid;
    grid-template-columns: 1fr 320px;
    gap: $spacing-4;
    flex: 1;
    min-height: 0;
    overflow: hidden;
  }

  &__grid-wrapper {
    overflow: auto;
    background: $white;
    border-radius: $radius-lg;
    border: 1px solid $gray-200;
  }

  &__detail {
    flex-shrink: 0;
    overflow: auto;
  }

  &__empty {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    height: 100%;
    min-height: 400px;
    padding: $spacing-8;
    color: $gray-500;
    text-align: center;

    svg {
      margin-bottom: $spacing-4;
      opacity: 0.5;
    }

    p {
      margin-bottom: $spacing-4;
      font-size: $font-size-lg;
    }

    button {
      padding: $spacing-2 $spacing-4;
      background: $primary-blue;
      color: $white;
      border: none;
      border-radius: $radius-md;
      font-size: $font-size-sm;
      cursor: pointer;

      &:hover {
        background: $primary-blue-dark;
      }
    }
  }
}

// Module Legend
.module-legend {
  display: flex;
  flex-wrap: wrap;
  gap: $spacing-2;
  flex-shrink: 0;

  &__item {
    display: inline-flex;
    align-items: center;
    gap: $spacing-2;
    padding: $spacing-1 $spacing-3;
    background: $white;
    border: 1px solid $gray-200;
    border-radius: $radius-full;
    font-size: $font-size-sm;
    color: $gray-700;
    cursor: pointer;
    transition: all $transition-fast;

    &:hover {
      background: $gray-100;
    }

    &--selected {
      background: $gray-100;
      border-color: $primary-blue;
    }
  }

  &__dot {
    width: 10px;
    height: 10px;
    border-radius: $radius-full;
  }

  &__label {
    font-weight: $font-weight-medium;
  }
}

// Timetable Grid
.timetable-grid {
  display: flex;
  flex-direction: column;
  min-width: 800px;

  &__header {
    display: grid;
    grid-template-columns: 64px repeat(7, 1fr);
    border-bottom: 1px solid $gray-200;
    flex-shrink: 0;
  }

  &__time-header {
    padding: $spacing-3;
    background: $gray-100;
  }

  &__day-header {
    padding: $spacing-3;
    text-align: center;
    font-weight: $font-weight-semibold;
    color: $gray-700;
    background: $gray-100;
    border-left: 1px solid $gray-200;
  }

  &__day-label {
    font-size: $font-size-sm;
  }

  &__body {
    display: grid;
    grid-template-columns: 64px repeat(7, 1fr);
    flex: 1;
  }

  &__time-column {
    display: flex;
    flex-direction: column;
    background: $gray-100;
    border-right: 1px solid $gray-200;
  }

  &__time-slot {
    height: 60px;
    padding: $spacing-1 $spacing-2;
    border-bottom: 1px solid $gray-200;
    display: flex;
    align-items: flex-start;
    justify-content: flex-end;
  }

  &__time-label {
    font-size: $font-size-xs;
    color: $gray-500;
  }

  &__day-column {
    position: relative;
    border-left: 1px solid $gray-200;
    display: flex;
    flex-direction: column;
  }

  &__hour-slot {
    height: 60px;
    border: none;
    border-bottom: 1px solid $gray-200;
    background: transparent;
    cursor: pointer;
    transition: background-color $transition-fast;

    &:hover {
      background: rgba($primary-blue, 0.05);
    }
  }
}

// Class Block
.class-block {
  position: absolute;
  left: 2px;
  right: 2px;
  padding: $spacing-2;
  border-radius: $radius-md;
  color: white;
  cursor: pointer;
  overflow: hidden;
  transition: all $transition-fast;
  border: none;
  text-align: left;
  font-family: inherit;
  background-color: var(--class-color, #3B82F6);

  &:hover {
    filter: brightness(1.1);
    z-index: 5;
  }

  &--selected {
    box-shadow: 0 0 0 2px white, 0 0 0 4px $primary-blue;
    z-index: 10;
  }

  &__content {
    display: flex;
    flex-direction: column;
    gap: 2px;
    height: 100%;
  }

  &__title {
    font-size: $font-size-xs;
    font-weight: $font-weight-semibold;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
  }

  &__time {
    font-size: 10px;
    opacity: 0.9;
  }

  &__location {
    font-size: 10px;
    opacity: 0.8;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
  }
}

// Class Form
.class-form {
  display: flex;
  flex-direction: column;
  gap: $spacing-4;

  &__row {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: $spacing-3;
  }

  &__field {
    display: flex;
    flex-direction: column;
    gap: $spacing-2;
  }

  &__colors {
    display: flex;
    gap: $spacing-2;
    flex-wrap: wrap;
  }

  &__color-btn {
    width: 32px;
    height: 32px;
    border-radius: $radius-full;
    border: 2px solid transparent;
    cursor: pointer;
    transition: all $transition-fast;

    &:hover {
      transform: scale(1.1);
    }

    &--active {
      border-color: $gray-900;
      box-shadow: 0 0 0 2px white, 0 0 0 4px $gray-900;
    }
  }

  &__actions {
    display: flex;
    justify-content: flex-end;
    gap: $spacing-3;
    padding-top: $spacing-4;
    border-top: 1px solid $gray-200;
  }
}

// Day Picker
.day-picker {
  display: flex;
  gap: $spacing-2;

  &__btn {
    width: 40px;
    height: 40px;
    display: flex;
    align-items: center;
    justify-content: center;
    border: 1px solid $gray-200;
    border-radius: $radius-md;
    background: $white;
    color: $gray-700;
    font-size: $font-size-sm;
    font-weight: $font-weight-medium;
    cursor: pointer;
    transition: all $transition-fast;

    &:hover:not(:disabled) {
      background: $gray-100;
      border-color: $primary-blue;
    }

    &--selected {
      background: $primary-blue;
      border-color: $primary-blue;
      color: $white;

      &:hover:not(:disabled) {
        background: $primary-blue-dark;
      }
    }

    &:disabled {
      opacity: 0.5;
      cursor: not-allowed;
    }
  }
}

// Class Detail
.class-detail {
  display: flex;
  flex-direction: column;
  height: 100%;
  background: $white;
  border-radius: $radius-lg;
  border: 1px solid $gray-200;
  overflow: hidden;

  &__header {
    display: flex;
    justify-content: flex-end;
    padding: $spacing-3;
    border-bottom: 1px solid $gray-200;
  }

  &__close {
    display: flex;
    align-items: center;
    justify-content: center;
    width: 32px;
    height: 32px;
    border: none;
    background: transparent;
    color: $gray-500;
    border-radius: $radius-md;
    cursor: pointer;

    &:hover {
      background: $gray-100;
      color: $gray-900;
    }
  }

  &__content {
    flex: 1;
    overflow: auto;
    padding: $spacing-4;
  }

  &__title-row {
    display: flex;
    align-items: center;
    gap: $spacing-3;
    margin-bottom: $spacing-3;
  }

  &__color-dot {
    width: 16px;
    height: 16px;
    border-radius: $radius-full;
    flex-shrink: 0;
  }

  &__title {
    font-size: $font-size-xl;
    font-weight: $font-weight-bold;
    color: $gray-900;
  }

  &__module {
    display: flex;
    align-items: center;
    gap: $spacing-2;
    margin-bottom: $spacing-4;
    color: $gray-700;
  }

  &__module-code {
    font-weight: $font-weight-semibold;
  }

  &__module-name {
    &::before {
      content: '';
      margin-right: $spacing-2;
    }
  }

  &__section {
    margin-bottom: $spacing-4;
  }

  &__section-title {
    font-size: $font-size-xs;
    font-weight: $font-weight-semibold;
    color: $gray-500;
    text-transform: uppercase;
    letter-spacing: 0.05em;
    margin-bottom: $spacing-2;
  }

  &__schedule {
    display: flex;
    flex-direction: column;
    gap: $spacing-2;
  }

  &__schedule-days {
    display: flex;
    gap: $spacing-1;
  }

  &__day-circle {
    width: 28px;
    height: 28px;
    display: flex;
    align-items: center;
    justify-content: center;
    border-radius: $radius-full;
    background: $gray-100;
    color: $gray-500;
    font-size: $font-size-xs;
    font-weight: $font-weight-medium;

    &--active {
      background: $primary-blue;
      color: $white;
    }
  }

  &__schedule-time {
    font-size: $font-size-sm;
    color: $gray-700;
  }

  &__semester {
    font-size: $font-size-sm;
    color: $gray-700;
  }

  &__text {
    font-size: $font-size-sm;
    color: $gray-700;
  }

  &__description {
    font-size: $font-size-sm;
    color: $gray-700;
    line-height: 1.6;

    p {
      margin-bottom: $spacing-2;
    }
  }

  &__exception-list {
    list-style: none;
    padding: 0;
    margin: 0;
    display: flex;
    flex-direction: column;
    gap: $spacing-2;
  }

  &__exception {
    display: flex;
    align-items: center;
    gap: $spacing-2;
    padding: $spacing-2;
    background: $gray-100;
    border-radius: $radius-md;
    font-size: $font-size-sm;
  }

  &__exception-date {
    font-weight: $font-weight-medium;
    color: $gray-900;
  }

  &__exception-type {
    padding: 2px $spacing-2;
    border-radius: $radius-sm;
    font-size: $font-size-xs;
    font-weight: $font-weight-medium;

    &--cancelled {
      background: $error-light;
      color: $error;
    }

    &--rescheduled {
      background: $warning-light;
      color: $warning;
    }

    &--moved {
      background: $info-light;
      color: $info;
    }
  }

  &__exception-reason {
    color: $gray-500;
  }

  &__linked-notes {
    list-style: none;
    padding: 0;
    margin: 0;
    display: flex;
    flex-direction: column;
    gap: $spacing-1;
  }

  &__linked-note {
    border-radius: $radius-md;

    &:hover {
      background: $gray-100;
    }
  }

  &__linked-note-btn {
    width: 100%;
    display: flex;
    align-items: center;
    gap: $spacing-2;
    padding: $spacing-2;
    border: none;
    background: transparent;
    text-align: left;
    cursor: pointer;
    border-radius: $radius-md;
    color: $gray-700;

    &:hover {
      color: $gray-900;
    }

    svg {
      flex-shrink: 0;
      color: $gray-400;
    }
  }

  &__linked-note-title {
    flex: 1;
    font-size: $font-size-sm;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
  }

  &__actions {
    display: flex;
    gap: $spacing-3;
    padding: $spacing-4;
    border-top: 1px solid $gray-200;
  }

  &__delete-btn {
    color: $error;

    &:hover {
      background: rgba($error, 0.1);
    }
  }
}

// Mobile responsive for timetable
@media (max-width: 1024px) {
  .timetable-page {
    &__content {
      grid-template-columns: 1fr;
    }

    &__detail {
      position: fixed;
      top: 0;
      right: 0;
      bottom: 0;
      width: 100%;
      max-width: 400px;
      z-index: 50;
      box-shadow: -4px 0 20px rgba(0, 0, 0, 0.1);
    }
  }
}

@media (max-width: 768px) {
  .timetable-page {
    padding: $spacing-3;

    &__header {
      flex-direction: column;
      align-items: flex-start;
      gap: $spacing-3;
    }

    &__add-btn {
      width: 100%;
      justify-content: center;
    }
  }

  .class-form__row {
    grid-template-columns: 1fr;
  }

  .day-picker {
    flex-wrap: wrap;
  }
}

// =============================================
// Classes List Page
// =============================================

.classes-page {
  padding: $spacing-6;
  max-width: 1400px;
  margin: 0 auto;

  &__header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    margin-bottom: $spacing-6;
  }

  &__header-left {
    display: flex;
    flex-direction: column;
    gap: $spacing-1;
  }

  &__title {
    font-size: $font-size-2xl;
    font-weight: $font-weight-bold;
    color: $gray-900;
  }

  &__subtitle {
    font-size: $font-size-sm;
    color: $gray-500;
  }

  &__add-btn {
    display: flex;
    align-items: center;
    gap: $spacing-2;
    padding: $spacing-2 $spacing-4;
    background: $primary-blue;
    color: $white;
    border: none;
    border-radius: $radius-md;
    font-weight: $font-weight-medium;
    cursor: pointer;
    transition: background-color 0.2s;

    &:hover {
      background: #4670DC;
    }
  }

  &__content {
    min-height: 400px;
  }

  &__grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
    gap: $spacing-4;
  }

  &__empty {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    padding: $spacing-12;
    text-align: center;
    color: $gray-500;

    svg {
      margin-bottom: $spacing-4;
      color: $gray-300;
    }

    h3 {
      font-size: $font-size-lg;
      font-weight: $font-weight-semibold;
      color: $gray-700;
      margin-bottom: $spacing-2;
    }

    p {
      margin-bottom: $spacing-4;
    }

    button {
      padding: $spacing-2 $spacing-4;
      background: $primary-blue;
      color: $white;
      border: none;
      border-radius: $radius-md;
      font-weight: $font-weight-medium;
      cursor: pointer;

      &:hover {
        background: #4670DC;
      }
    }
  }
}

// Class Card
.class-card {
  display: flex;
  background: $white;
  border: 1px solid $gray-200;
  border-radius: $radius-lg;
  overflow: hidden;
  cursor: pointer;
  transition: all 0.2s;
  text-align: left;
  width: 100%;

  &:hover {
    border-color: $gray-300;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
  }

  &__color-bar {
    width: 6px;
    flex-shrink: 0;
  }

  &__content {
    flex: 1;
    padding: $spacing-4;
    display: flex;
    flex-direction: column;
    gap: $spacing-2;
  }

  &__header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    gap: $spacing-2;
  }

  &__title {
    font-size: $font-size-base;
    font-weight: $font-weight-semibold;
    color: $gray-900;
  }

  &__code {
    font-size: $font-size-xs;
    color: $gray-500;
    background: $gray-100;
    padding: 2px $spacing-2;
    border-radius: $radius-sm;
  }

  &__module {
    font-size: $font-size-sm;
    color: $gray-600;
  }

  &__schedule {
    display: flex;
    align-items: center;
    gap: $spacing-2;
    font-size: $font-size-sm;
    color: $gray-700;
  }

  &__days {
    font-weight: $font-weight-medium;
  }

  &__time {
    color: $gray-500;
  }

  &__instructor,
  &__location {
    display: flex;
    align-items: center;
    gap: $spacing-2;
    font-size: $font-size-sm;
    color: $gray-500;

    svg {
      color: $gray-400;
    }
  }
}

// =============================================
// Class Detail Page
// =============================================

.class-detail-page {
  padding: $spacing-6;
  max-width: 1200px;
  margin: 0 auto;

  &__header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    margin-bottom: $spacing-6;
  }

  &__back {
    display: flex;
    align-items: center;
    gap: $spacing-2;
    color: $gray-600;
    text-decoration: none;
    font-size: $font-size-sm;
    transition: color 0.2s;

    &:hover {
      color: $gray-900;
    }
  }

  &__actions {
    display: flex;
    align-items: center;
    gap: $spacing-3;
  }

  &__delete-btn {
    color: $error;

    &:hover {
      background: rgba($error, 0.1);
    }
  }

  &__not-found {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    padding: $spacing-12;
    text-align: center;

    h2 {
      font-size: $font-size-xl;
      color: $gray-900;
      margin-bottom: $spacing-2;
    }

    p {
      color: $gray-500;
      margin-bottom: $spacing-4;
    }

    a {
      color: $primary-blue;
      text-decoration: none;

      &:hover {
        text-decoration: underline;
      }
    }
  }

  &__content {
    display: grid;
    grid-template-columns: 1fr 350px;
    gap: $spacing-6;
  }

  &__main {
    display: flex;
    flex-direction: column;
    gap: $spacing-6;
  }

  &__title-section {
    display: flex;
    align-items: flex-start;
    gap: $spacing-4;
  }

  &__color-indicator {
    width: 8px;
    height: 40px;
    border-radius: $radius-full;
    flex-shrink: 0;
  }

  &__title {
    font-size: $font-size-2xl;
    font-weight: $font-weight-bold;
    color: $gray-900;
    margin-bottom: $spacing-1;
  }

  &__module {
    font-size: $font-size-base;
    color: $gray-600;
  }

  &__module-code {
    font-weight: $font-weight-semibold;
  }

  &__info-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
    gap: $spacing-4;
  }

  &__card {
    background: $gray-50;
    border: 1px solid $gray-200;
    border-radius: $radius-lg;
    padding: $spacing-4;
  }

  &__card--exam {
    background: rgba($primary-blue, 0.05);
    border-color: rgba($primary-blue, 0.2);
  }

  &__card-title {
    display: flex;
    align-items: center;
    gap: $spacing-2;
    font-size: $font-size-xs;
    font-weight: $font-weight-semibold;
    color: $gray-500;
    text-transform: uppercase;
    letter-spacing: 0.05em;
    margin-bottom: $spacing-3;

    svg {
      color: $gray-400;
    }
  }

  &__card-value {
    font-size: $font-size-base;
    color: $gray-900;
    font-weight: $font-weight-medium;
  }

  &__schedule-days {
    display: flex;
    gap: $spacing-1;
    margin-bottom: $spacing-2;
  }

  &__day {
    width: 32px;
    height: 32px;
    display: flex;
    align-items: center;
    justify-content: center;
    border-radius: $radius-full;
    background: $gray-200;
    color: $gray-500;
    font-size: $font-size-xs;
    font-weight: $font-weight-medium;

    &--active {
      background: $primary-blue;
      color: $white;
    }
  }

  &__schedule-time {
    font-size: $font-size-base;
    color: $gray-900;
    font-weight: $font-weight-medium;
    margin-bottom: $spacing-1;
  }

  &__semester {
    font-size: $font-size-sm;
    color: $gray-500;
  }

  &__exam-date {
    font-size: $font-size-sm;
    color: $primary-blue;
    margin-top: $spacing-1;
  }

  &__section {
    background: $white;
    border: 1px solid $gray-200;
    border-radius: $radius-lg;
    padding: $spacing-4;
  }

  &__section-title {
    display: flex;
    align-items: center;
    gap: $spacing-2;
    font-size: $font-size-sm;
    font-weight: $font-weight-semibold;
    color: $gray-900;
    margin-bottom: $spacing-3;

    svg {
      color: $gray-400;
    }
  }

  &__description {
    font-size: $font-size-sm;
    color: $gray-700;
    line-height: 1.6;

    p {
      margin-bottom: $spacing-2;
    }
  }

  &__exceptions {
    display: flex;
    flex-direction: column;
    gap: $spacing-2;
  }

  &__exception {
    display: flex;
    align-items: center;
    gap: $spacing-2;
    padding: $spacing-2;
    background: $gray-50;
    border-radius: $radius-md;
    font-size: $font-size-sm;
  }

  &__exception-date {
    font-weight: $font-weight-medium;
    color: $gray-900;
  }

  &__exception-type {
    padding: 2px $spacing-2;
    border-radius: $radius-sm;
    font-size: $font-size-xs;
    font-weight: $font-weight-medium;

    &--cancelled {
      background: $error-light;
      color: $error;
    }

    &--rescheduled {
      background: $warning-light;
      color: $warning;
    }

    &--moved {
      background: $info-light;
      color: $info;
    }
  }

  &__exception-reason {
    color: $gray-500;
  }

  // Sidebar - Study Notes
  &__sidebar {
    display: flex;
    flex-direction: column;
    gap: $spacing-4;
  }

  &__notes-section {
    background: $white;
    border: 1px solid $gray-200;
    border-radius: $radius-lg;
    padding: $spacing-4;
  }

  &__notes-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    margin-bottom: $spacing-3;
  }

  &__notes-count {
    background: $gray-100;
    color: $gray-600;
    font-size: $font-size-xs;
    font-weight: $font-weight-medium;
    padding: 2px $spacing-2;
    border-radius: $radius-full;
  }

  &__notes-empty {
    text-align: center;
    padding: $spacing-6;
    color: $gray-500;

    p {
      margin-bottom: $spacing-2;
    }

    a {
      color: $primary-blue;
      text-decoration: none;

      &:hover {
        text-decoration: underline;
      }
    }
  }

  &__notes-list {
    display: flex;
    flex-direction: column;
    gap: $spacing-2;
  }

  &__note-card {
    display: block;
    width: 100%;
    text-align: left;
    padding: $spacing-3;
    background: $gray-50;
    border: 1px solid $gray-200;
    border-radius: $radius-md;
    cursor: pointer;
    transition: all 0.2s;

    &:hover {
      border-color: $gray-300;
      background: $white;
    }
  }

  &__note-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    margin-bottom: $spacing-1;
  }

  &__note-title {
    font-size: $font-size-sm;
    font-weight: $font-weight-medium;
    color: $gray-900;
  }

  &__note-excerpt {
    font-size: $font-size-xs;
    color: $gray-500;
    line-height: 1.5;
    margin-bottom: $spacing-2;
    display: -webkit-box;
    -webkit-line-clamp: 2;
    -webkit-box-orient: vertical;
    overflow: hidden;
  }

  &__note-date {
    font-size: $font-size-xs;
    color: $gray-400;
  }
}

// Timetable page header update
.timetable-page {
  &__header-left {
    display: flex;
    flex-direction: column;
    gap: $spacing-1;
  }

  &__classes-link {
    font-size: $font-size-sm;
    color: $primary-blue;
    text-decoration: none;

    &:hover {
      text-decoration: underline;
    }
  }
}

// Responsive
@media (max-width: 1024px) {
  .class-detail-page {
    &__content {
      grid-template-columns: 1fr;
    }

    &__sidebar {
      order: -1;
    }
  }
}

@media (max-width: 768px) {
  .classes-page {
    padding: $spacing-4;

    &__header {
      flex-direction: column;
      align-items: flex-start;
      gap: $spacing-3;
    }

    &__add-btn {
      width: 100%;
      justify-content: center;
    }

    &__grid {
      grid-template-columns: 1fr;
    }
  }

  .class-detail-page {
    padding: $spacing-4;

    &__header {
      flex-direction: column;
      align-items: flex-start;
      gap: $spacing-3;
    }

    &__actions {
      width: 100%;
      justify-content: flex-end;
    }

    &__info-grid {
      grid-template-columns: 1fr;
    }
  }
}

// =============================================
// Assignments Page Styles
// =============================================

.assignments-page {
  padding: $spacing-6;
  max-width: 1200px;
  margin: 0 auto;

  &__header {
    display: flex;
    align-items: flex-start;
    justify-content: space-between;
    margin-bottom: $spacing-6;
  }

  &__header-left {
    display: flex;
    flex-direction: column;
    gap: $spacing-1;
  }

  &__title {
    font-size: $font-size-2xl;
    font-weight: $font-weight-bold;
    color: $gray-900;
  }

  &__subtitle {
    font-size: $font-size-sm;
    color: $gray-500;
  }

  &__add-btn {
    display: flex;
    align-items: center;
    gap: $spacing-2;
    padding: $spacing-2 $spacing-4;
    background: $primary-blue;
    color: $white;
    border: none;
    border-radius: $radius-lg;
    font-size: $font-size-sm;
    font-weight: $font-weight-medium;
    cursor: pointer;
    transition: all $transition-fast;

    &:hover {
      background: #2563eb;
    }

    svg {
      flex-shrink: 0;
    }
  }

  &__filters {
    display: flex;
    align-items: center;
    justify-content: space-between;
    margin-bottom: $spacing-4;
    gap: $spacing-4;
    flex-wrap: wrap;
  }

  &__filter-tabs {
    display: flex;
    gap: $spacing-1;
    background: $gray-100;
    padding: $spacing-1;
    border-radius: $radius-lg;
  }

  &__filter-tab {
    padding: $spacing-2 $spacing-4;
    background: transparent;
    border: none;
    border-radius: $radius-md;
    font-size: $font-size-sm;
    color: $gray-600;
    cursor: pointer;
    transition: all $transition-fast;

    &:hover {
      color: $gray-900;
    }

    &--active {
      background: $white;
      color: $gray-900;
      font-weight: $font-weight-medium;
      box-shadow: $shadow-sm;
    }
  }

  &__class-filter {
    padding: $spacing-2 $spacing-3;
    border: 1px solid $gray-200;
    border-radius: $radius-md;
    font-size: $font-size-sm;
    color: $gray-700;
    background: $white;
    cursor: pointer;
    min-width: 150px;

    &:focus {
      outline: none;
      border-color: $primary-blue;
    }
  }

  &__content {
    min-height: 400px;
  }

  &__empty {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    padding: $spacing-12;
    text-align: center;
    color: $gray-400;

    svg {
      margin-bottom: $spacing-4;
    }

    h3 {
      font-size: $font-size-lg;
      font-weight: $font-weight-medium;
      color: $gray-600;
      margin-bottom: $spacing-2;
    }

    p {
      font-size: $font-size-sm;
      color: $gray-500;
      margin-bottom: $spacing-4;
    }

    button {
      padding: $spacing-2 $spacing-4;
      background: $primary-blue;
      color: $white;
      border: none;
      border-radius: $radius-md;
      font-size: $font-size-sm;
      cursor: pointer;

      &:hover {
        background: #2563eb;
      }
    }
  }

  &__lists {
    display: flex;
    flex-direction: column;
    gap: $spacing-6;
  }

  &__section {
    display: flex;
    flex-direction: column;
    gap: $spacing-3;
  }

  &__section-title {
    display: flex;
    align-items: center;
    gap: $spacing-2;
    font-size: $font-size-base;
    font-weight: $font-weight-semibold;
    color: $gray-700;

    &--overdue {
      color: #EF4444;
    }
  }

  &__list {
    display: flex;
    flex-direction: column;
    gap: $spacing-2;
  }
}

// Assignment Card
.assignment-card {
  display: flex;
  align-items: flex-start;
  gap: $spacing-3;
  padding: $spacing-4;
  background: $white;
  border: 1px solid $gray-200;
  border-radius: $radius-lg;
  cursor: pointer;
  transition: all $transition-fast;

  &:hover {
    border-color: $gray-300;
    box-shadow: $shadow-sm;
  }

  &--completed {
    opacity: 0.7;

    .assignment-card__title {
      text-decoration: line-through;
      color: $gray-500;
    }
  }

  &--overdue {
    border-left: 3px solid #EF4444;
  }

  &__checkbox {
    width: 20px;
    height: 20px;
    border: 2px solid $gray-300;
    border-radius: $radius-sm;
    background: transparent;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    flex-shrink: 0;
    transition: all $transition-fast;

    &:hover {
      border-color: $primary-blue;
    }

    &--checked {
      background: #22C55E;
      border-color: #22C55E;
      color: $white;
    }
  }

  &__content {
    flex: 1;
    min-width: 0;
  }

  &__header {
    display: flex;
    align-items: center;
    gap: $spacing-2;
    margin-bottom: $spacing-1;
  }

  &__title {
    font-size: $font-size-base;
    font-weight: $font-weight-medium;
    color: $gray-900;
    margin: 0;
  }

  &__priority {
    padding: $spacing-1 $spacing-2;
    font-size: $font-size-xs;
    font-weight: $font-weight-medium;
    color: $white;
    border-radius: $radius-sm;
    text-transform: capitalize;
  }

  &__meta {
    display: flex;
    align-items: center;
    gap: $spacing-3;
    font-size: $font-size-sm;
    color: $gray-500;
  }

  &__class {
    color: $gray-600;
  }

  &__due {
    &--overdue {
      color: #EF4444;
      font-weight: $font-weight-medium;
    }
  }

  &__grade {
    font-size: $font-size-sm;
    font-weight: $font-weight-medium;
    color: $gray-700;
    margin-top: $spacing-2;
  }

  &__status {
    padding: $spacing-1 $spacing-2;
    font-size: $font-size-xs;
    font-weight: $font-weight-medium;
    color: $white;
    border-radius: $radius-sm;
    flex-shrink: 0;
  }
}

// Assignment Form
.assignment-form {
  display: flex;
  flex-direction: column;
  gap: $spacing-4;

  &__row {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: $spacing-4;
  }

  &__actions {
    display: flex;
    justify-content: flex-end;
    gap: $spacing-3;
    padding-top: $spacing-4;
    border-top: 1px solid $gray-200;
  }
}

// Assignment Detail Page
.assignment-detail-page {
  padding: $spacing-6;
  max-width: 1000px;
  margin: 0 auto;

  &__back {
    display: flex;
    align-items: center;
    gap: $spacing-2;
    color: $gray-600;
    background: transparent;
    border: none;
    font-size: $font-size-sm;
    cursor: pointer;
    margin-bottom: $spacing-4;

    &:hover {
      color: $gray-900;
    }
  }

  &__header {
    display: flex;
    align-items: flex-start;
    justify-content: space-between;
    margin-bottom: $spacing-6;
    gap: $spacing-4;
  }

  &__header-left {
    display: flex;
    flex-direction: column;
    gap: $spacing-2;
    flex: 1;
  }

  &__title-row {
    display: flex;
    align-items: center;
    gap: $spacing-3;
  }

  &__title {
    font-size: $font-size-2xl;
    font-weight: $font-weight-bold;
    color: $gray-900;
    margin: 0;
  }

  &__priority {
    padding: $spacing-1 $spacing-2;
    font-size: $font-size-xs;
    font-weight: $font-weight-medium;
    color: $white;
    border-radius: $radius-sm;
    text-transform: capitalize;
  }

  &__class-link {
    font-size: $font-size-sm;
    color: $primary-blue;
    text-decoration: none;

    &:hover {
      text-decoration: underline;
    }
  }

  &__actions {
    display: flex;
    gap: $spacing-2;
  }

  &__action-btn {
    padding: $spacing-2;
    background: transparent;
    border: 1px solid $gray-200;
    border-radius: $radius-md;
    color: $gray-600;
    cursor: pointer;
    transition: all $transition-fast;

    &:hover {
      background: $gray-50;
      border-color: $gray-300;
    }

    &--danger:hover {
      background: #FEF2F2;
      border-color: #FECACA;
      color: #EF4444;
    }
  }

  &__content {
    display: grid;
    grid-template-columns: 2fr 1fr;
    gap: $spacing-6;
  }

  &__main {
    display: flex;
    flex-direction: column;
    gap: $spacing-6;
  }

  &__sidebar {
    display: flex;
    flex-direction: column;
    gap: $spacing-4;
  }

  &__section {
    background: $white;
    border: 1px solid $gray-200;
    border-radius: $radius-lg;
    padding: $spacing-4;
  }

  &__section-title {
    font-size: $font-size-sm;
    font-weight: $font-weight-semibold;
    color: $gray-500;
    text-transform: uppercase;
    letter-spacing: 0.05em;
    margin-bottom: $spacing-3;
  }

  &__section-content {
    font-size: $font-size-base;
    color: $gray-700;
    line-height: 1.6;

    p {
      margin: 0 0 $spacing-2;

      &:last-child {
        margin-bottom: 0;
      }
    }
  }

  &__status-section {
    background: $white;
    border: 1px solid $gray-200;
    border-radius: $radius-lg;
    padding: $spacing-4;
  }

  &__status-title {
    font-size: $font-size-sm;
    font-weight: $font-weight-semibold;
    color: $gray-500;
    margin-bottom: $spacing-3;
  }

  &__status-buttons {
    display: flex;
    flex-direction: column;
    gap: $spacing-2;
  }

  &__status-btn {
    display: flex;
    align-items: center;
    gap: $spacing-2;
    padding: $spacing-2 $spacing-3;
    background: $white;
    border: 1px solid $gray-200;
    border-radius: $radius-md;
    font-size: $font-size-sm;
    color: $gray-700;
    cursor: pointer;
    transition: all $transition-fast;

    &:hover {
      background: $gray-50;
    }

    &--active {
      border-color: $primary-blue;
      background: rgba($primary-blue, 0.05);
      color: $primary-blue;
    }

    &--submitted {
      &.assignment-detail-page__status-btn--active {
        border-color: #F59E0B;
        background: rgba(#F59E0B, 0.05);
        color: #D97706;
      }
    }

    &--graded {
      &.assignment-detail-page__status-btn--active {
        border-color: #22C55E;
        background: rgba(#22C55E, 0.05);
        color: #16A34A;
      }
    }
  }

  &__status-dot {
    width: 8px;
    height: 8px;
    border-radius: 50%;
  }

  &__info-section {
    background: $white;
    border: 1px solid $gray-200;
    border-radius: $radius-lg;
    padding: $spacing-4;
  }

  &__info-grid {
    display: flex;
    flex-direction: column;
    gap: $spacing-3;
  }

  &__info-item {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding-bottom: $spacing-2;
    border-bottom: 1px solid $gray-100;

    &:last-child {
      border-bottom: none;
      padding-bottom: 0;
    }
  }

  &__info-label {
    font-size: $font-size-sm;
    color: $gray-500;
  }

  &__info-value {
    font-size: $font-size-sm;
    font-weight: $font-weight-medium;
    color: $gray-900;

    &--overdue {
      color: #EF4444;
    }
  }

  &__grade-section {
    background: $white;
    border: 1px solid $gray-200;
    border-radius: $radius-lg;
    padding: $spacing-4;
  }

  &__grade-display {
    text-align: center;
    padding: $spacing-4;
    background: $gray-50;
    border-radius: $radius-md;
    margin-bottom: $spacing-3;
  }

  &__grade-value {
    font-size: $font-size-3xl;
    font-weight: $font-weight-bold;
    color: $gray-900;
  }

  &__grade-max {
    font-size: $font-size-lg;
    color: $gray-500;
  }

  &__grade-percent {
    font-size: $font-size-sm;
    color: $gray-500;
    margin-top: $spacing-1;
  }

  &__grade-btn {
    width: 100%;
    padding: $spacing-2;
    background: $primary-blue;
    color: $white;
    border: none;
    border-radius: $radius-md;
    font-size: $font-size-sm;
    font-weight: $font-weight-medium;
    cursor: pointer;

    &:hover {
      background: #2563eb;
    }
  }
}

// Grade Modal
.grade-modal {
  &__form {
    display: flex;
    flex-direction: column;
    gap: $spacing-4;
  }

  &__row {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: $spacing-4;
  }

  &__actions {
    display: flex;
    justify-content: flex-end;
    gap: $spacing-3;
    padding-top: $spacing-4;
    border-top: 1px solid $gray-200;
  }
}

// Responsive Assignments
@media (max-width: 1024px) {
  .assignment-detail-page {
    &__content {
      grid-template-columns: 1fr;
    }

    &__sidebar {
      order: -1;
    }
  }
}

@media (max-width: 768px) {
  .assignments-page {
    padding: $spacing-4;

    &__header {
      flex-direction: column;
      align-items: flex-start;
      gap: $spacing-3;
    }

    &__add-btn {
      width: 100%;
      justify-content: center;
    }

    &__filters {
      flex-direction: column;
      align-items: stretch;
    }

    &__filter-tabs {
      width: 100%;
    }

    &__filter-tab {
      flex: 1;
      text-align: center;
    }

    &__class-filter {
      width: 100%;
    }
  }

  .assignment-card {
    flex-wrap: wrap;

    &__content {
      width: 100%;
    }

    &__meta {
      flex-wrap: wrap;
    }
  }

  .assignment-form {
    &__row {
      grid-template-columns: 1fr;
    }
  }

  .assignment-detail-page {
    padding: $spacing-4;

    &__header {
      flex-direction: column;
    }

    &__actions {
      width: 100%;
      justify-content: flex-end;
    }
  }
}
